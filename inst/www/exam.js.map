{"version":3,"sources":["../../srcwww/_header.js","../../srcwww/utils.js","../../srcwww/accessibility.js","../../srcwww/status.js","../../srcwww/attempt.js","../../srcwww/feedback.js","../../srcwww/exercises.js","../../srcwww/autocomplete.js","../../srcwww/sections.js","../../srcwww/grading.js","../../srcwww/ace-monochrome.js","../../srcwww/lib/bootstrap/src/util.js","../../srcwww/lib/bootstrap/src/modal.js"],"names":["TRANSITION_END","MAX_UID","MILLISECONDS_MULTIPLIER","obj","bindType","delegateType","handle","$","event","called","Util","setTimeout","getSpecialTransitionEndEvent","getUID","prefix","Math","document","getSelectorFromElement","selector","element","hrefAttr","getTransitionDurationFromElement","transitionDuration","transitionDelay","floatTransitionDuration","parseFloat","floatTransitionDelay","reflow","triggerTransitionEnd","supportsTransitionEnd","Boolean","isElement","typeCheckConfig","Object","expectedTypes","configTypes","value","config","valueType","toType","componentName","findShadowRoot","root","jQueryDetection","version","minMajor","ltMajor","minMinor","minPatch","maxMajor","setTransitionEndSupport","JQUERY_NO_CONFLICT","ESCAPE_KEYCODE","Default","backdrop","keyboard","focus","DefaultType","EVENT_HIDE","EVENT_HIDE_PREVENTED","EVENT_HIDDEN","EVENT_SHOW","EVENT_FOCUSIN","EVENT_RESIZE","EVENT_CLICK_DISMISS","EVENT_KEYDOWN_DISMISS","EVENT_MOUSEUP_DISMISS","EVENT_MOUSEDOWN_DISMISS","EVENT_CLICK_DATA_API","CLASS_NAME_SCROLLABLE","CLASS_NAME_SCROLLBAR_MEASURER","CLASS_NAME_BACKDROP","CLASS_NAME_OPEN","CLASS_NAME_FADE","CLASS_NAME_SHOW","CLASS_NAME_STATIC","SELECTOR_DIALOG","SELECTOR_MODAL_BODY","SELECTOR_DATA_TOGGLE","SELECTOR_DATA_DISMISS","SELECTOR_FIXED_CONTENT","SELECTOR_STICKY_CONTENT","Modal","_backdrop","_isShown","_isBodyOverflowing","_ignoreBackdropClick","_isTransitioning","_scrollbarWidth","show","relatedTarget","showEvent","isDefaultPrevented","target","_showBackdrop","hide","transition","_hideModal","dispose","window","handleUpdate","_getConfig","_triggerBackdropTransition","modalTransitionDuration","_element","style","emulateTransitionEnd","_showElement","appendChild","removeAttribute","modalBody","_config","_dialog","_enforceFocus","_setEscapeEvent","_setResizeEvent","classList","callback","backdropTransitionDuration","callbackRemove","_removeBackdrop","_adjustDialog","_resetAdjustments","_checkScrollbar","rect","_setScrollbar","fixedContent","calculatedPadding","stickyContent","actualMargin","marginRight","calculatedMargin","actualPadding","_resetScrollbar","call","elements","querySelectorAll","margin","css","padding","_getScrollbarWidth","scrollDiv","scrollbarWidth","_jQueryInterface","data","$target"],"mappings":"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","sourcesContent":["if (typeof exports === 'undefined') {\n  window.exports = window.Exam = {}\n}\n","exports.utils = (function () {\n  'use strict'\n\n  const arrowKeyUp = 38\n  const arrowKeyDown = 40\n  const lang = $('html').attr('lang') || 'en-US'\n\n  function preventDefault (e) {\n    e.preventDefault()\n  }\n\n  function generateRandomId (prefix) {\n    if (!prefix) {\n      prefix = 'anonymous-el-'\n    }\n    return prefix + Math.random().toString(36).slice(2)\n  }\n\n  function storeGet (key) {\n    return JSON.parse(window.localStorage.getItem('examinr_' + key))\n  }\n\n  function storeSet (key, value) {\n    return window.localStorage.setItem('examinr_' + key, JSON.stringify(value))\n  }\n\n  function storeRemove (key) {\n    return window.localStorage.removeItem('examinr_' + key)\n  }\n\n  function initNumericInputs () {\n    const numRegexp = /^-?(\\d*\\.)?\\d+$/\n    $('.examinr-q-numeric input[type=text]').each(function () {\n      const input = $(this)\n      const feedbackId = exports.utils.randomId()\n\n      input.change(function () {\n        const newVal = input.val()\n        $('#' + feedbackId).remove()\n        if (newVal && !numRegexp.test(newVal)) {\n          input.attr('aria-describedby', feedbackId).addClass('is-invalid')\n            .after('<span id=\"' + feedbackId + '\" class=\"sr-only\">invalid value</span>')\n        } else {\n          if (newVal.length > 0) {\n            input.val(parseFloat(newVal))\n          }\n          input.removeAttr('aria-describedby').removeClass('is-invalid')\n        }\n      })\n    })\n  }\n\n  $(function () {\n    initNumericInputs()\n  })\n\n  return {\n    /**\n     * Enable or disable the high-contrast theme. If the argument is missing, the theme is determined based\n     * on the user's preference or the user-agent settings.\n     *\n     * @param {boolean|undefined} enabled\n     */\n    store: {\n      get: storeGet,\n      set: storeSet,\n      rem: storeRemove\n    },\n\n    /**\n     * Format the given date in the document's language\n     * @param {int} timestamp the timestamp to format\n     */\n    formatDate: function (timestamp) {\n      return new Date(timestamp).toLocaleString(lang)\n    },\n\n    /**\n     * Disable stepping by arrow keys and scrolling on number inputs.\n     *\n     * @param {jQuery} numberInputs the inputs to disable the defaults for.\n     */\n    disableNumberInputDefaults: function (numberInputs) {\n      if (!numberInputs) {\n        numberInputs = $('input[type=number]')\n      }\n\n      numberInputs.on('focus', function () {\n        $(this).on('wheel.disableScrollEvent', preventDefault)\n          .on('keydown.disableScrollEvent', function (e) {\n            if (e.which === arrowKeyDown || e.which === arrowKeyUp) {\n              e.preventDefault()\n            }\n          })\n      }).on('blur', function () {\n        $(this).off('.disableScrollEvent')\n      })\n    },\n    /**\n     * Debounce the given function, calling it only once for a series of shortly spaced calls.\n     * @param {function} fun function to debounce\n     * @param {integer} wait time (in ms) to wait before calling `fun`\n     * @param {boolean} immediate if `fun` should be called immediately on the raising edge, not the falling edge.\n     */\n    debounce: function (fun, wait, immediate) {\n      let timerId = null\n\n      return function () {\n        const context = this\n        const args = arguments\n        const delayed = function () {\n          timerId = null\n          if (!immediate) {\n            fun.apply(context, args)\n          }\n        }\n        const callImmediately = immediate && !timerId\n        window.clearTimeout(timerId)\n        timerId = window.setTimeout(delayed, wait)\n        if (callImmediately) {\n          fun.apply(context, args)\n        }\n      }\n    },\n    randomId: generateRandomId,\n    /**\n     * Render any math in the element with the given id\n     *\n     * @param {string} id id of the element to render math.\n     * @param {boolean} isDummy if true, the id attribute is removed.\n     */\n    triggerMathJax: function (id, isDummy) {\n      if (window.MathJax && window.MathJax.startup && window.MathJax.startup.promise) {\n        window.MathJax.startup.promise = window.MathJax.startup.promise\n          .then(() => {\n            let el = $('#' + id)\n            if (isDummy) {\n              const parent = el.parent()\n              if (parent.length > 0) {\n                parent.append(el.remove().html())\n                el = parent\n              }\n            }\n            return window.MathJax.typesetPromise(el)\n          })\n          .catch((err) => window.console.warn('Cannot typeset math: ', err.message))\n        return window.MathJax.startup.promise\n      }\n    },\n\n    /**\n     * Render any math in the element with the given id\n     *\n     * @param {jQuery} el element to render math in\n     */\n    renderMathJax: function (el) {\n      if (window.MathJax && window.MathJax.startup && window.MathJax.startup.promise) {\n        window.MathJax.startup.promise = window.MathJax.startup.promise\n          .then(() => {\n            return window.MathJax.typesetPromise(el)\n          })\n          .catch((err) => window.console.warn('Cannot typeset math: ', err.message))\n        return window.MathJax.startup.promise\n      }\n    },\n\n    /**\n     * Toggle a \"working\" shim over the given element.\n     * @param {jQuery} el jquery element which should be covered by the shim.\n     * @param {boolean} show force the shim to be shown/hidden, regardless of the current state.\n     */\n    toggleShim: function (el, show) {\n      if (!el) {\n        // Overlay over entire document\n        el = $('body')\n      } else {\n        el = $(el)\n      }\n\n      let spinOverlay = el.children('.examinr-recompute-overlay')\n\n      // If `show` is missing, show the overlay if it's not present at the moment\n      if (typeof show === 'undefined') {\n        show = (spinOverlay.length === 0)\n      }\n\n      if (show === false) {\n        spinOverlay.remove()\n        el.removeClass('examinr-recompute-outer')\n      } else {\n        spinOverlay = $('<div class=\"examinr-recompute-overlay\"><div class=\"examinr-recompute\" role=\"status\">' +\n                          '<span class=\"sr-only\">Loading...</span>' +\n                        '</div></div>')\n        el.prepend(spinOverlay)\n        const op = spinOverlay.offsetParent()\n        if (op.length > 0 && op.get(0) !== el.get(0)) {\n          el.addClass('examinr-recompute-outer')\n        }\n        el.show()\n      }\n    }\n  }\n}())\n","exports.accessibility = (function () {\n  'use strict'\n\n  function getOrMakeId (el) {\n    if (el.attr('id')) {\n      return el.attr('id')\n    }\n    const newId = exports.utils.randomId('aria-el-')\n    el.attr('id', newId)\n    return newId\n  }\n\n  function ariaAssociate (ariaAttribute, target, ref) {\n    target.attr('aria-' + ariaAttribute, getOrMakeId(ref))\n  }\n\n  /**\n   * Determine if the given media query list is (a) not supported or (b) matches.\n   * @param {MediaQueryList} mql\n   */\n  function evalMediaQueryList (mql) {\n    return (mql.media === 'not all') || mql.matches\n  }\n\n  function useHighContrast () {\n    const stored = exports.utils.store.get('highContrast')\n    if (stored === null) {\n      // Determine based on the user-agent settings.\n      return !(evalMediaQueryList(window.matchMedia('not speech')) &&\n        evalMediaQueryList(window.matchMedia('(monochrome: 0)')) &&\n        evalMediaQueryList(window.matchMedia('(forced-colors: none)')) &&\n        evalMediaQueryList(window.matchMedia('(inverted-colors: none)')) &&\n        evalMediaQueryList(window.matchMedia('not (prefers-contrast: more)')))\n    }\n    return (stored !== false)\n  }\n\n  /**\n  * Enable or disable the high-contrast theme. If the argument is missing, the theme is determined based\n  * on the user's preference or the user-agent settings.\n  *\n  * @param {boolean|undefined} enabled\n  */\n  function highContrastTheme (enabled) {\n    if (enabled !== true && enabled !== false) {\n      enabled = useHighContrast()\n    }\n    if (enabled) {\n      enabled = true\n      $('html').addClass('high-contrast')\n    } else {\n      $('html').removeClass('high-contrast')\n      enabled = false\n    }\n    exports.utils.store.set('highContrast', enabled)\n    exports.exercises.highContrastTheme(enabled)\n    exports.utils.store.set('highContrast', enabled)\n  }\n\n  $(function () {\n    $('a:empty').attr('aria-hidden', 'true')\n    highContrastTheme()\n    $('.btn-high-contrast').click(function () {\n      highContrastTheme(!$('html').hasClass('high-contrast'))\n    })\n\n    // add labels to question containers and hide labels from UI if requested\n    $('.examinr-question').each(function () {\n      const question = $(this)\n      question.find('.hide-label .control-label').addClass('sr-only')\n      ariaAssociate('labelledby', question, question.find('.card-header'))\n    })\n  })\n\n  return {\n    /**\n     * Enable or disable the high-contrast theme. If the argument is missing, the theme is determined based\n     * on the user's preference or the user-agent settings.\n     *\n     * @param {boolean|undefined} enabled\n     */\n    highContrastTheme: highContrastTheme,\n    ariaAssociate: ariaAssociate,\n    ariaLabelledBy: function (el, labelEl) {\n      ariaAssociate('labelledby', el, labelEl)\n    },\n    ariaDescribedBy: function (el, labelEl) {\n      ariaAssociate('describedby', el, labelEl)\n    }\n  }\n}())\n","exports.status = (function () {\n  'use strict'\n\n  let messages = {}\n  let statusContainer\n  const defaultContext = 'info'\n  let currentContext = defaultContext\n\n  const dialogContainerTitle = $('<h4 class=\"modal-title\" id=\"' +\n    exports.utils.randomId('examinr-status-dialog-title-') + '\">')\n  const dialogContainerContent = $('<div class=\"modal-body\" id=\"' +\n    exports.utils.randomId('examinr-status-dialog-body-') + '\">')\n  const dialogContainerFooter = $(\n    '<div class=\"modal-footer\">' +\n      '<button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\">Close</button>' +\n    '</div>')\n  const dialogContainer = $(\n    '<div class=\"modal\" tabindex=\"-1\" role=\"alertdialog\" ' +\n        'aria-labelledby=\"' + dialogContainerTitle.attr('id') + '\"' +\n        'aria-describedby=\"' + dialogContainerContent.attr('id') + '\">' +\n      '<div class=\"modal-dialog modal-lg\" role=\"document\">' +\n        '<div class=\"modal-content\"><div class=\"modal-header\"></div></div>' +\n      '</div>' +\n    '</div>')\n\n  const statusMessageEl = $('<div class=\"alert alert-danger lead examinr-status-message\" role=\"alert\"></div>')\n\n  dialogContainer.find('.modal-header').append(dialogContainerTitle)\n  dialogContainer.find('.modal-content').append(dialogContainerContent).append(dialogContainerFooter)\n\n  /**\n   * Show a status message.\n   * @param {object} condition the condition object to show. Must contain the following elements:\n   *  type {string} one of \"error\", \"locked\", \"warning\", or \"info\"\n   *  message {string} the status message, may contain HTML\n   *  title {string} (for type \"error\" or \"locked\") the title for the error dialog\n   *  button {string} (for type \"error\") the button label for the error dialog\n   *  action {string} (for type \"error\") the action associated with the button. If \"reload\", the page is reloaded,\n   *    otherwise, the dialog is simply closed.\n   */\n  Shiny.addCustomMessageHandler('__.examinr.__-statusMessage', function (condition) {\n    statusMessageEl.detach()\n    if (condition.type === 'error') {\n      showErrorDialog(condition.content.title, condition.content.body, condition.action, condition.content.button,\n        condition.triggerId, condition.triggerEvent, condition.triggerDelay)\n    } else if (condition.type === 'locked') {\n      showErrorDialog(condition.content.title, condition.content.body, 'none', '')\n      $('main').hide()\n    } else {\n      const alertContext = condition.type === 'warning' ? 'alert-warning' : 'alert-info'\n      statusMessageEl.removeClass('alert-warning alert-info')\n        .addClass(alertContext)\n        .append(statusMessageEl)\n        .html(condition.content.body)\n        .find('.examinr-timestamp')\n        .each(parseTimestamp)\n    }\n    fixMainOffset()\n  })\n\n  /**\n   * Fix the top offset of the main content to make room for the status container.\n   */\n  function fixMainOffset () {\n    if (statusContainer && statusContainer.length > 0) {\n      $('body').css('paddingTop', statusContainer.outerHeight())\n    }\n  }\n\n  /**\n   * Parse the content inside the element as timestamp and replace with the browser's locale date-time string.\n   */\n  function parseTimestamp () {\n    const el = $(this)\n    const timestamp = parseInt(el.text())\n    if (timestamp && !isNaN(timestamp)) {\n      el.text(exports.utils.formatDate(timestamp * 1000))\n    } else {\n      el.text('')\n    }\n  }\n\n  /**\n   * Show a modal error dialog.\n   * @param {string} title title of the dialog, may contain HTML\n   * @param {string} content content of the dialog, may contain HTML\n   * @param {string} action what action should be taken when the button is clicked. If \"reload\", the browser is\n   *   instructed to reload the page. If \"none\", the dialog cannot be closed. In all other cases,\n   *   clicking the button will close the dialog.\n   * @param {string} button label for the button, may not contain HTML\n   */\n  function showErrorDialog (title, content, action, button, triggerId, triggerEvent, triggerDelay) {\n    const closeBtn = dialogContainerFooter.children('button')\n\n    dialogContainerTitle.html(title).find('.examinr-timestamp').each(parseTimestamp)\n    dialogContainerContent.html(content).find('.examinr-timestamp').each(parseTimestamp)\n\n    if (action === 'none') {\n      dialogContainerFooter.hide()\n    } else {\n      closeBtn.text(button)\n      if (action === 'reload') {\n        closeBtn.one('click', function () {\n          window.location.reload()\n        })\n      } else if (action === 'trigger' && triggerId && triggerEvent) {\n        closeBtn.one('click', function () {\n          if (triggerDelay) {\n            exports.utils.toggleShim($('body'), true)\n            window.setTimeout(() => $('#' + triggerId).trigger(triggerEvent), triggerDelay)\n          } else {\n            $('#' + triggerId).trigger(triggerEvent)\n          }\n        })\n      }\n    }\n\n    exports.utils.toggleShim($('body'), false)\n\n    dialogContainer.attr('role', (action === 'none') ? 'dialog' : 'errordialog')\n      .appendTo(document.body)\n      .one('hidden.bs.modal', function () {\n        dialogContainer.detach()\n      })\n      .modal({\n        keyboard: false,\n        backdrop: 'static',\n        show: true\n      })\n  }\n\n  $(function () {\n    exports.utils.toggleShim($('body'), true)\n    statusContainer = $('.examinr-exam-status')\n    messages = JSON.parse($('script.examinr-status-messages').remove().text() || '{}')\n    statusContainer.addClass('alert alert-' + currentContext)\n    fixMainOffset()\n  })\n\n  return {\n    /**\n     * Reset (i.e., hide) the status messages\n     */\n    resetMessages: function () {\n      statusMessageEl.detach()\n      dialogContainer.detach()\n      fixMainOffset()\n    },\n\n    /**\n     * Get the message associated with an identifier.\n     * @param {string} what the message identifier\n     * @returns the message for the given identifier, or null if the identifier is unknown.\n     */\n    getMessage: function (what) {\n      return messages[what] || null\n    },\n\n    /**\n     * Set the context of the status bar.\n     * @param {string} context the context class, one of info, warning, danger. If missing, reset to the default\n     *   context class.\n     */\n    setContext: function (context) {\n      if (!context) {\n        context = defaultContext\n      }\n      statusContainer.removeClass('alert-' + currentContext).addClass('alert-' + context)\n      currentContext = context\n    },\n\n    /**\n     * Append the element to the status bar and adjust the offset.\n     * @param {jQuery} el the element to append\n     * @param {string} where where to append the element. Can be one of \"left\", \"center\" or \"right\"\n     */\n    append: function (el, where) {\n      el = $(el)\n      switch (where) {\n        case 'left':\n          statusContainer.children('.col-left').append(el)\n          break\n        case 'right':\n          statusContainer.children('.col-right').append(el)\n          break\n        case 'center':\n        default:\n          statusContainer.children('.col-center').append(el)\n      }\n      fixMainOffset()\n      return el\n    },\n\n    /**\n     * Remove the element from the status bar and adjust the offset.\n     * @param {jQuery} el the element to remove\n     */\n    remove: function (el) {\n      el.remove()\n      fixMainOffset()\n    },\n\n    /**\n    * Fix the top offset of the main content to make room for the status bar.\n    */\n    fixMainOffset: fixMainOffset,\n\n    /**\n     * Show a modal error dialog.\n     * @param {string} title title of the dialog, may contain HTML\n     * @param {string} content content of the dialog, may contain HTML\n     * @param {string} action what action should be taken when the button is clicked. If \"reload\", the browser is\n     *   instructed to reload the page. If \"none\", the dialog cannot be closed. In all other cases,\n     *   clicking the button will close the dialog.\n     * @param {string} button label for the button, may not contain HTML\n     */\n    showErrorDialog: showErrorDialog\n  }\n}())\n","exports.attempt = (function () {\n  'use strict'\n\n  let config = {}\n  let timelimitTimer\n  let timelimit = Number.POSITIVE_INFINITY\n  let timerIsShown = false\n\n  const progressEl = $('<div class=\"examinr-progress\" role=\"status\"></div>')\n\n  /** Update the current attempt information.\n   *\n   * @param {object} attempt an object with the following properties:\n   *   - {boolean} active whether there is an active attempt.\n   *   - {integer} timelimit the timestamp (in seconds) when the current attempt is closed.\n   */\n  Shiny.addCustomMessageHandler('__.examinr.__-attemptStatus', function (attempt) {\n    if (attempt.gracePeriod) {\n      config.gracePeriod = attempt.gracePeriod\n    }\n    if (attempt && attempt.active) {\n      $('main').show().trigger('shown')\n      progressEl.show()\n\n      if (attempt.timelimit !== 0 && (!attempt.timelimit || attempt.timelimit === 'Inf')) {\n        attempt.timelimit = Number.POSITIVE_INFINITY\n      }\n      try {\n        timelimit = new Date(attempt.timelimit * 1000)\n        if (timelimitTimer) {\n          window.clearTimeout(timelimitTimer)\n          timelimitTimer = false\n        }\n        updateTimeLeft()\n      } catch (e) {\n        window.console.warn('Cannot set timelimit for current attempt:', e)\n        timelimit = Number.POSITIVE_INFINITY\n      }\n    } else {\n      $('main').hide()\n      exports.status.remove(progressEl)\n      exports.status.setContext()\n    }\n  })\n\n  function toBase10 (val) {\n    return (val >= 10 ? val.toString(10) : '0' + val.toString(10))\n  }\n\n  /**\n   * Update the \"time left\" status.\n   */\n  function updateTimeLeft () {\n    let msLeft = timelimit === Number.POSITIVE_INFINITY ? Number.POSITIVE_INFINITY : timelimit - new Date()\n    const timerEl = progressEl.find('.examinr-timer')\n\n    if (!isNaN(msLeft) && msLeft < Number.POSITIVE_INFINITY) {\n      if (msLeft < 1 && msLeft > -1000 * (config.gracePeriod || 1)) {\n        msLeft = 0\n      }\n      if (msLeft >= 0) {\n        const hrsLeft = Math.floor(msLeft / 3600000)\n        const minLeft = Math.floor((msLeft % 3600000) / 60000)\n        const secLeft = Math.floor((msLeft % 60000) / 1000)\n\n        if (hrsLeft > 0) {\n          timerEl.children('.hrs').removeClass('ignore').text(toBase10(hrsLeft))\n        } else {\n          timerEl.children('.hrs').addClass('ignore').text('00')\n        }\n        timerEl.children('.min').text(toBase10(minLeft))\n        if (hrsLeft > 0 || minLeft >= 10) {\n          timerEl.children('.min').addClass('nosec')\n          timerEl.children('.sec').hide()\n        } else {\n          timerEl.children('.min').removeClass('nosec')\n          timerEl.children('.sec').show().text(toBase10(secLeft))\n        }\n        timerEl.show()\n\n        if (!timerIsShown) {\n          exports.status.fixMainOffset()\n          timerIsShown = true\n        }\n\n        if (hrsLeft > 0 || minLeft >= 12) {\n          timelimitTimer = window.setTimeout(updateTimeLeft, 60000) // call every minute\n        } else {\n          if (minLeft < 5) {\n            exports.status.setContext('danger')\n          } else if (minLeft < 10) {\n            exports.status.setContext('warning')\n          }\n          timelimitTimer = window.setTimeout(updateTimeLeft, 1000) // call every second\n        }\n      } else {\n        // Time is up. Destroy the interface.\n        $('main').remove()\n        const timeoutMsg = exports.status.getMessage('attemptTimeout')\n        exports.status.showErrorDialog(timeoutMsg.title, timeoutMsg.body, 'none')\n      }\n    } else {\n      timerEl.hide()\n    }\n  }\n\n  $(function () {\n    config = JSON.parse($('script.examinr-attempts-config').remove().text() || '{}')\n    const progressMsg = exports.status.getMessage('progress')\n\n    if (progressMsg) {\n      // replace the following format strings:\n      // - \"{section_nr}\" with an element holding the current section number\n      // - \"{total_sections}\" with an element holding the total number of sections\n      // - \"{time_left}\" with an element holding the time left\n      const sectionProgress = progressMsg.section\n        .replace('{section_nr}', '<span class=\"examinr-section-nr\">1</span>')\n        .replace('{total_sections}', '<span class=\"examinr-total-sections\">' + (config.totalSections || 1) +\n                  '</span>')\n      const timerHtml = progressMsg.timer\n        .replace('{time_left}', '<span class=\"examinr-timer\" role=\"timer\">' +\n                                  '<span class=\"hrs\">??</span>' +\n                                  '<span class=\"min\">??</span>' +\n                                  '<span class=\"sec\"></span>' +\n                                '</span>')\n\n      if (config.progressive || config.haveTimelimit) {\n        if (config.progressive && config.haveTimelimit) {\n          progressEl.html(progressMsg.combined\n            .replace('{section}', sectionProgress)\n            .replace('{timer}', timerHtml))\n        } else if (config.progressive) {\n          progressEl.html(sectionProgress)\n        } else if (config.haveTimelimit) {\n          progressEl.html(timerHtml)\n        }\n\n        exports.status.append(progressEl)\n        updateTimeLeft()\n      }\n    }\n\n    if (config.progressbar) {\n      const progressbarEl = $(\n        '<div class=\"progress\">' +\n          '<div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"' +\n            config.totalSections + '\" style=\"min-width: 2em;\">' +\n          '</div>' +\n        '</div>')\n      exports.status.append(progressbarEl)\n    }\n  })\n\n  return {\n    /**\n     * Update the current section number.\n     * @param {int} currentSectionNr the current section number\n     */\n    updateSection: function (currentSectionNr) {\n      if (!currentSectionNr || isNaN(currentSectionNr) || currentSectionNr < 0 ||\n          currentSectionNr > config.totalSections) {\n        progressEl.hide()\n      } else {\n        progressEl.show().find('.examinr-section-nr').text(currentSectionNr)\n        if (config.progressbar) {\n          progressEl.find('.progress-bar')\n            .attr('aria-valuenow', currentSectionNr)\n            .width(Math.round(100 * currentSectionNr / config.totalSections) + '%')\n        }\n      }\n    }\n  }\n}())\n","exports.feedback = (function () {\n  'use strict'\n\n  const correctIcon = '<svg aria-label=\"correct\" class=\"examinr-feedback-annotation\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"/></svg>'\n\n  const incorrectIcon = '<svg aria-label=\"incorrect\" class=\"examinr-feedback-annotation\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z\"/></svg>'\n\n  const numFormat = window.Intl.NumberFormat(undefined, {\n    signDisplay: 'never',\n    style: 'decimal',\n    minimumSignificantDigits: 1,\n    maximumSignificantDigits: 3\n  })\n\n  const feedbackRenderer = []\n  const shinyRenderDelay = 250\n  let pointsEl\n\n  function runAfterUpdate (input, func) {\n    func()\n    input.one('shiny:updateinput', function () {\n      window.setTimeout(func, shinyRenderDelay)\n    })\n  }\n\n  function attemptChanged () {\n    const sel = $(this)\n    exports.utils.toggleShim($('body'), true)\n    // update the input value for the autocomplete input\n    Shiny.setInputValue('__.examinr.__-attemptSel', sel.val())\n  }\n\n  /**\n   * Render feedback data\n   */\n  Shiny.addCustomMessageHandler('__.examinr.__-feedback', function (data) {\n    exports.utils.toggleShim($('body'), false)\n    if (!pointsEl) {\n      $('.examinr-section-next').remove()\n      $('main').show()\n      exports.sections.showAll()\n\n      let options = ''\n      let disabled = 'disabled'\n\n      if (data.otherAttempts && data.otherAttempts.length > 0) {\n        options = data.otherAttempts.map(at => (\n          '<option value=\"' + at.id + '\">' + exports.utils.formatDate(at.finishedAt * 1000) + '</option>'\n        )).join('')\n\n        if (data.otherAttempts.length > 1) {\n          disabled = ''\n        }\n      }\n\n      const selId = exports.utils.randomId('attempt-sel')\n      exports.status.append('<div class=\"input-group input-group-sm\">' +\n            '<div class=\"input-group-prepend\">' +\n              '<label class=\"input-group-text\" for=\"' + selId + '\">' +\n                exports.status.getMessage('feedback').attemptLabel +\n              '</label>' +\n            '</div>' +\n            '<select class=\"custom-select\" ' + disabled + ' id=\"' + selId + '\">' +\n              options +\n            '</select>' +\n          '</div>', 'right')\n        .children('#' + selId)\n        .val(data.attempt.id)\n        .change(attemptChanged)\n\n      pointsEl = exports.status.append('<span></span>')\n    }\n\n    // turn feedback array into a map\n    const feedbackMap = Object.fromEntries(data.feedback.map(function (feedback) {\n      return [feedback.qid, feedback]\n    }))\n\n    let totalPoints = 0\n    let awardedPoints = 0\n\n    // Render feedback for text (or numeric) questions\n    $('.examinr-question').each(function () {\n      const question = $(this)\n      const label = question.data('questionlabel')\n      for (let i = 0, end = feedbackRenderer.length; i < end; i++) {\n        if (question.filter(feedbackRenderer[i].selector).length > 0) {\n          feedbackRenderer[i].callback(question, feedbackMap[label] || {})\n          if (label in feedbackMap) {\n            totalPoints += (feedbackMap[label].maxPoints || 0)\n            awardedPoints += (feedbackMap[label].points || NaN)\n            delete feedbackMap[label]\n          } else {\n            totalPoints += (question.data('maxpoints') || 0)\n            awardedPoints = NaN\n          }\n          return true\n        }\n      }\n      window.console.warn('No feedback renderer for question ' + label)\n    })\n\n    if (isNaN(awardedPoints)) {\n      awardedPoints = '&mdash;'\n    }\n\n    pointsEl.html(exports.status.getMessage('feedback').status\n      .replace('{awarded_points}', awardedPoints)\n      .replace('{total_points}', totalPoints))\n\n    exports.status.fixMainOffset()\n  })\n\n  function questionFooter (question) {\n    const card = question.hasClass('card') ? question : question.find('.card')\n    const footer = card.find('.card-footer')\n    if (footer.length === 0) {\n      return $('<div class=\"card-footer\">').appendTo(card)\n    }\n    return footer\n  }\n\n  function renderDefaultFeedback (question, feedback) {\n    const badge = question.find('.examinr-points')\n    if (badge.find('.awarded').length === 0) {\n      badge.prepend('<span class=\"awarded\"></span><span class=\"sr-only\"> out of </span>')\n    }\n\n    if (feedback.points || feedback.points === 0) {\n      const context = feedback.points <= 0 ? 'danger'\n        : (feedback.points >= feedback.maxPoints ? 'success' : 'secondary')\n\n      badge.removeClass('badge-secondary badge-info badge-success badge-danger')\n        .addClass('badge-' + context)\n        .find('.awarded')\n        .addClass('lead')\n        .text(feedback.points)\n    } else {\n      badge.removeClass('badge-secondary badge-info badge-success badge-danger')\n        .addClass('badge-info')\n        .find('.awarded')\n        .removeClass('lead')\n        .html('&mdash;')\n    }\n\n    // remove all previous feedback\n    question.find('.examinr-grading-feedback').remove()\n    const footer = questionFooter(question)\n\n    if (feedback.solution) {\n      footer.append('<div class=\"examinr-grading-feedback\">' +\n          '<h6>' + exports.status.getMessage('feedback').solutionLabel + '</h6>' +\n          '<div>' + feedback.solution + '</div>' +\n        '</div>')\n    }\n\n    if (feedback.comment) {\n      footer.append('<div class=\"text-muted examinr-grading-feedback\">' +\n        '<h6>' + exports.status.getMessage('feedback').commentLabel + '</h6>' +\n        '<div>' + feedback.comment + '</div>' +\n      '</div>')\n    }\n\n    exports.utils.renderMathJax(footer)\n  }\n\n  // Default feedback renderer for built-in questions created by `text_question()`\n  feedbackRenderer.push({\n    selector: '.examinr-q-textquestion',\n    callback: function (question, feedback) {\n      renderDefaultFeedback(question, feedback)\n\n      question.find('.shiny-input-container input,.shiny-input-container textarea')\n        .prop('readonly', true)\n        .val(feedback.answer || '')\n    }\n  })\n\n  // Default feedback renderer for built-in questions created by `mc_question()`\n  feedbackRenderer.push({\n    selector: '.examinr-q-mcquestion',\n    callback: function (question, feedback) {\n      const solution = feedback.solution\n      feedback.solution = null\n      renderDefaultFeedback(question, feedback)\n\n      runAfterUpdate(question, function () {\n        // reset old feedback\n        question.find('.examinr-feedback-annotation').remove()\n        question.find('label').removeAttr('class')\n\n        // display new feedback\n        const cbs = question.find('input[type=checkbox],input[type=radio]')\n        cbs.prop('disabled', true).prop('checked', false)\n\n        if (feedback.answer) {\n          feedback.answer.forEach(sel => {\n            if (sel.weight) {\n              const context = sel.weight > 0 ? 'success' : 'danger'\n              const weightStr = (sel.weight > 0 ? '+' : '&minus;') + numFormat.format(sel.weight)\n              cbs.filter('[value=\"' + sel.value + '\"]')\n                .prop('checked', true)\n                .parent()\n                .append('<span class=\"examinr-feedback-annotation badge badge-pill badge-' + context + '\">' +\n                  weightStr + '</span>')\n            }\n          })\n        }\n\n        if (solution) {\n          const correctValues = new Set(solution)\n\n          cbs.each(function () {\n            const cb = $(this)\n            const label = cb.parent()\n            if (cb.prop('checked')) {\n              if (correctValues.has(cb.val())) {\n                label.addClass('text-success').prepend(correctIcon)\n              } else {\n                label.addClass('text-danger').prepend(incorrectIcon)\n              }\n            } else {\n              if (correctValues.has(cb.val())) {\n                label.addClass('text-danger').prepend(incorrectIcon)\n              } else {\n                label.addClass('text-muted').prepend(correctIcon)\n              }\n            }\n          })\n        }\n      })\n    }\n  })\n\n  // Default feedback renderer for built-in exercise questions.\n  feedbackRenderer.push({\n    selector: '.examinr-q-exercise',\n    callback: function (question, feedback) {\n      const solution = feedback.solution\n      feedback.solution = null\n      renderDefaultFeedback(question, feedback)\n\n      const editor = question.data('editor')\n      if (editor) {\n        editor.setReadOnly(true)\n        editor.getSession().setValue(feedback.answer || '\\n')\n      }\n      question.find('.examinr-run-button').remove()\n      question.find('.examinr-exercise-status').remove()\n      const footer = questionFooter(question)\n\n      footer.removeClass('alert alert-danger text-muted')\n      if (solution) {\n        questionFooter(question)\n          .append('<div class=\"examinr-grading-feedback\">' +\n            '<h6>' + exports.status.getMessage('feedback').solutionLabel + '</h6>' +\n            '<pre><code>' + solution + '</code></pre>' +\n          '</div>')\n      }\n    }\n  })\n\n  return {\n    /**\n     * Register a function to render the feedback for all questions matching the given selector.\n     * If two functions match the same question, the function registered *later* will be called.\n     *\n     * @param {string} selector a valid jQuery selector query\n     * @param {function} func callback function which will be called with two arguments:\n     *   {jQuery} question the question element\n     *   {Object} the feedback object\n     */\n    registerFeedbackRenderer: function (selector, func) {\n      feedbackRenderer.unshift({ selector: selector, callback: func })\n    }\n  }\n}())\n","/*\n * Some parts of this file are dervied from the learnr project, which is licensed under the Apache 2.0 license.\n * Original work Copyright 2019 RStudio\n * Derived work Copyright 2020 David Kepplinger\n */\nexports.exercises = (function () {\n  'use strict'\n\n  const kMinLines = 5\n  const kMaxDefaultLines = 20\n  const kThemeMonochrome = 'ace/theme/monochrome'\n  const kThemeDefault = 'ace/theme/textmate'\n\n  let currentTheme = kThemeMonochrome\n  let exerciseRunButtonEnabled = true\n\n  function attachAceEditor (id, code) {\n    const editor = ace.edit(id)\n    editor.setHighlightActiveLine(false)\n    editor.setShowPrintMargin(false)\n    editor.setShowFoldWidgets(false)\n    editor.setBehavioursEnabled(true)\n    editor.renderer.setDisplayIndentGuides(false)\n    editor.setTheme(currentTheme)\n    editor.$blockScrolling = Infinity\n    editor.session.setMode('ace/mode/r')\n    editor.session.getSelection().clearSelection()\n    editor.setValue(code, -1)\n    return editor\n  }\n\n  function exerciseRunning (outputContainer, running) {\n    if (typeof running === 'undefined') {\n      running = !exerciseRunButtonEnabled\n    }\n\n    exports.utils.toggleShim(outputContainer, running)\n    exerciseRunButtonEnabled = (running === false)\n    $('.examinr-run-button').prop('disabled', !exerciseRunButtonEnabled)\n  }\n\n  function initializeExerciseEditor () {\n    const exercise = $(this)\n    const exerciseOptions = JSON.parse(exercise.children('script[type=\"application/json\"]').detach().text() || '{}')\n    let code = ''\n    exercise.children('pre').each(function () {\n      code += $(this).children('code').text() + '\\n'\n    }).remove()\n\n    const codeLines = code.split(/\\r?\\n/).length\n\n    const lines = (exerciseOptions.lines ? Math.max(1, exerciseOptions.lines)\n      : Math.min(Math.max(kMinLines, codeLines), kMaxDefaultLines))\n\n    if (codeLines < lines) {\n      code += '\\n'.repeat(lines - codeLines)\n    }\n\n    const editorId = exerciseOptions.inputId + '-editor'\n    const pointsLabel = exerciseOptions.points\n      ? '<span class=\"examinr-points badge badge-secondary\">' + exerciseOptions.points + '</span>'\n      : ''\n\n    const messageStrings = exports.status.getMessage('exercise') || {}\n\n    const exercisePanel = $('<div class=\"card\">' +\n      '<h6 class=\"card-header\">' + (exerciseOptions.title || '') + pointsLabel + '</h6>' +\n      '<div class=\"card-body\">' +\n        '<div id=\"' + editorId + '\" class=\"examinr-exercise-editor\" role=\"textbox\" contenteditable=\"true\" ' +\n            'aria-multiline=\"true\" tabindex=0 ></div>' +\n      '</div>' +\n      '<div class=\"card-footer text-muted\">' +\n        '<button type=\"button\" class=\"btn btn-secondary btn-sm examinr-run-button float-right\">' +\n          '<span class=\"icon\"><svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" class=\"bi bi-play-fill\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\"><path d=\"M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z\"/></svg></span>' +\n          exerciseOptions.buttonLabel +\n        '</button>' +\n        '<div class=\"examinr-exercise-status\">' + messageStrings.notYetRun + '</div>' +\n      '</div>' +\n    '</div>')\n\n    const outputContainer = $('<div class=\"examinr-exercise-output card bg-light\">' +\n      (messageStrings.outputTitle\n        ? ('<div class=\"card-header text-muted small\">' + messageStrings.outputTitle + '</div>')\n        : '') +\n      '<div class=\"card-body p-3\" role=\"status\"></div>' +\n    '</div>')\n    const exerciseEditor = exercise.find('#' + editorId)\n\n    exercise.append(exercisePanel).append(outputContainer)\n\n    // make exercise more accessible\n    exports.accessibility.ariaLabelledBy(exercise, exercisePanel.find('.card-header'))\n    exports.accessibility.ariaAssociate('controls', exercisePanel.find('.examinr-run-button'), outputContainer.find('.card-body'))\n    exerciseEditor.attr('aria-label', exerciseOptions.inputLabel)\n    exerciseEditor.children().attr('aria-hidden', 'true')\n\n    if (!messageStrings.notYetRun) {\n      exercise.find('.examinr-exercise-status').hide()\n    } else {\n      exports.accessibility.ariaDescribedBy(exercisePanel, exercise.find('.examinr-exercise-status'))\n    }\n    exercise.find('.examinr-exercise-output').hide()\n\n    const runCodeButton = exercise.find('.examinr-run-button')\n\n    // Proxy a \"run code\" event through the button to also trigger shiny input events.\n    const triggerClick = function () {\n      runCodeButton.click()\n    }\n\n    const editor = attachAceEditor(editorId, code)\n    editor.setFontSize(0.8125 * parseFloat(exercise.find('.card-body').css('font-size')))\n    editor.commands.addCommand({\n      name: 'run_rcode',\n      bindKey: { win: 'Ctrl+Enter', mac: 'Command+Enter' },\n      exec: triggerClick\n    })\n    editor.commands.addCommand({\n      name: 'run_rcode-shift',\n      bindKey: { win: 'Ctrl+Shift+Enter', mac: 'Command+Shift+Enter' },\n      exec: triggerClick\n    })\n\n    const updateAceHeight = function () {\n      editor.setOptions({\n        minLines: lines,\n        maxLines: lines\n      })\n    }\n    updateAceHeight()\n    editor.getSession().on('change', updateAceHeight)\n\n    runCodeButton.click(function () {\n      editor.focus()\n    })\n\n    exercise.data({\n      editor: editor,\n      options: exerciseOptions\n    })\n\n    exercise.parents('section').on('shown', function () {\n      editor.resize(true)\n    })\n  }\n\n  function initializeEditorBindings () {\n    const inputBindings = new Shiny.InputBinding()\n    $.extend(inputBindings, {\n      find: function (scope) {\n        return $(scope).find('.examinr-exercise')\n      },\n      getId: function (exercise) {\n        return $(exercise).data('options').inputId\n      },\n      subscribe: function (exercise, callback) {\n        exercise = $(exercise)\n        exercise.find('.examinr-run-button').on('click.examinrExerciseInputBinding', function () {\n          if (exerciseRunButtonEnabled) {\n            exercise.data('sendData', true)\n            exerciseRunning(exercise.find('.examinr-exercise-output'), true)\n            callback(true)\n          }\n        })\n      },\n      unsubscribe: function (exercise) {\n        $(exercise).find('.examinr-run-button').off('.examinrExerciseInputBinding')\n      },\n      getValue: function (exercise) {\n        exercise = $(exercise)\n        if (exercise.data('sendData') !== true) {\n          return null\n        }\n        exercise.data('sendData', false)\n        return {\n          label: exercise.data('options').label,\n          code: exercise.data('editor').getSession().getValue(),\n          timestamp: new Date().getTime()\n        }\n      },\n      setValue: function (exercise, value) {\n        $(exercise).data('editor').getSession().setValue(value)\n      }\n    })\n    Shiny.inputBindings.register(inputBindings, 'examinr.exerciseInputBinding')\n\n    const outputBindings = new Shiny.OutputBinding()\n    $.extend(outputBindings, {\n      find: function (scope) {\n        return $(scope).find('.examinr-exercise')\n      },\n      getId: function (exercise) {\n        return $(exercise).data('options').outputId\n      },\n      renderValue: function (exercise, data) {\n        exercise = $(exercise)\n        if (data.result) {\n          const outputContainer = exercise.find('.examinr-exercise-output').show().find('.card-body')\n          outputContainer.html(data.result)\n          outputContainer.find('.kable-table table').addClass('table table-striped table-sm')\n        } else {\n          exercise.find('.examinr-exercise-output').hide()\n        }\n        if (data.status) {\n          const footerClass = (data.status_class && data.status_class !== 'info')\n            ? ('alert-' + data.status_class) : 'text-muted'\n\n          exercise.find('.card-footer')\n            .removeClass('text-muted')\n            .removeClass('alert-success')\n            .removeClass('alert-warning')\n            .removeClass('alert-danger')\n            .addClass(footerClass)\n          exercise.find('.examinr-exercise-status').show().html(data.status)\n        } else {\n          exercise.find('.examinr-exercise-status').hide().html('')\n        }\n        exerciseRunning(exercise.find('.examinr-exercise-output'), false)\n      },\n      renderError: function (exercise, error) {\n        exercise = $(exercise)\n        exerciseRunning(exercise.find('.examinr-exercise-output'), false)\n        exercise.find('.examinr-exercise-output').hide()\n        exercise.find('.examinr-exercise-status').show().text(error.message)\n      },\n      clearError: function (exercise) {\n        exercise = $(exercise)\n        exerciseRunning(exercise.find('.examinr-exercise-output'), false)\n        exercise.find('.examinr-exercise-output').hide()\n        exercise.find('.examinr-exercise-status').hide()\n      }\n    })\n    Shiny.outputBindings.register(outputBindings, 'examinr.exerciseOutputBinding')\n  }\n\n  $(function () {\n    $('.examinr-exercise').each(initializeExerciseEditor)\n    initializeEditorBindings()\n  })\n\n  return {\n    highContrastTheme: function (enabled) {\n      currentTheme = enabled ? kThemeMonochrome : kThemeDefault\n      $('.examinr-exercise').each(function () {\n        const editor = $(this).data('editor')\n        if (editor) {\n          editor.setTheme(currentTheme)\n        }\n      })\n    }\n  }\n}())\n","/*\n * Some parts of this file are dervied from the learnr project, which is licensed under the Apache 2.0 license.\n * Original work Copyright 2019 RStudio\n * Derived work Copyright 2020 David Kepplinger\n */\n(function () {\n  'use strict'\n\n  const kModifierKeyNone = 0\n  const kModifierKeyCtrl = 1\n  const kModifierKeyAlt = 2\n  const kModifierKeyShift = 4\n  const kModifierKeyMeta = 8\n  const kKeycodeTab = 9\n  const kKeycodeSpace = 32\n  var autocompleteTimerId\n  var aceAutocompleteCallback = function () {}\n\n  function modifierCombination (event) {\n    return kModifierKeyNone |\n        (event.ctrlKey ? kModifierKeyCtrl : 0) |\n        (event.altKey ? kModifierKeyAlt : 0) |\n        (event.metaKey ? kModifierKeyMeta : 0) |\n        (event.shiftKey ? kModifierKeyShift : 0)\n  }\n\n  const customRCompleter = {\n    insertMatch: function (editor, data) {\n      // remove prefix\n      const ranges = editor.selection.getAllRanges()\n      const filterLength = editor.completer.completions.filterText.length\n      for (var i = 0; i < ranges.length; i++) {\n        ranges[i].start.column -= filterLength\n        editor.session.remove(ranges[i])\n      }\n\n      // insert completion term (add parentheses for functions)\n      editor.execCommand('insertstring', data.caption)\n\n      // move cursor backwards for functions\n      if (data.is_function) {\n        editor.navigateLeft(1)\n      }\n    }\n  }\n\n  // this message handler is called when new autocomplete results are available.\n  Shiny.addCustomMessageHandler('__.examinr.__-autocomplete', function (suggestions) {\n    const completions = suggestions.map(function (item) {\n      // Items are an array of the form [namespace (str), symbol (str), isFunction (bool)]\n      if (!item || !item[1]) {\n        return null\n      }\n      return {\n        caption: item[1] + (item[2] ? '()' : ''),\n        value: item[1],\n        score: 0,\n        meta: item[0] ? ('{' + item[0] + '}') : '',\n        is_function: item[2],\n        completer: customRCompleter\n      }\n    }).filter(x => x)\n    aceAutocompleteCallback(null, completions)\n  })\n\n  function isPopupOpen (editor) {\n    return editor.completer && editor.completer.popup && editor.completer.popup.isOpen\n  }\n\n  function getCompletions (editor, session, position, _, callback) {\n    // send autocompletion request with all the code up to cursor position\n    // (done to enable multi-line autocompletions)\n    const code = session.getTextRange({\n      start: { row: 0, column: 0 },\n      end: position\n    })\n\n    // If the popup is not open, force a Shiny input event, otherwise only if the code changed.\n    const priority = isPopupOpen(editor) ? 'value' : 'event'\n\n    // this will be called when the Shiny message is received\n    aceAutocompleteCallback = callback\n    // update the input value for the autocomplete input\n    Shiny.setInputValue('__.examinr.__-autocomplete', {\n      code: code,\n      label: editor.exerciseLabel\n    }, { priority: priority })\n  }\n\n  // Initialize autocomplete for the exercise.\n  // Return false if the exercise does not need autocomplete, true otherwise.\n  function initializeExerciseAutocomplete () {\n    const exercise = $(this)\n    if (exercise.data('options').autocomplete !== true) {\n      return\n    }\n\n    // Initialize the editor for autocomplete\n\n    const editor = exercise.data('editor')\n    const exerciseOptions = exercise.data('options')\n\n    const startAutocomplete = function () {\n      editor.execCommand('startAutocomplete')\n    }\n\n    const onChangeCallback = function (data) {\n      // use only a single autocompleter at a time!\n      clearTimeout(autocompleteTimerId)\n\n      data = data || {}\n      if (data.action !== 'insert' || !data.lines || !data.lines.length || data.lines.length > 1) {\n        return\n      }\n      // NOTE: Ace has already updated the document line at this point\n      // so we can just look at the state of that line\n      const pos = editor.getCursorPosition()\n      const line = editor.session.getLine(pos.row)\n\n      // NOTE: we allow new autocompletion sessions following a\n      // ':' insertion just to enable cases where the user is\n      // typing e.g. 'stats::rnorm()' while the popup is visible\n      if (isPopupOpen(editor) && !/::$/.test(line)) {\n        return\n      }\n\n      // figure out appropriate delay -- want to autocomplete\n      // immediately after a '$' or '@' insertion, but need to\n      // execute on timeout to allow Ace to finish processing\n      // events (if any)\n      const delayMs = /[$@]$|::$/.test(line) ? 10 : 300\n      autocompleteTimerId = setTimeout(startAutocomplete, delayMs)\n    }\n\n    editor.on('change', onChangeCallback)\n    editor.on('destroy', function () {\n      editor.off(onChangeCallback)\n    })\n\n    editor.exerciseLabel = exerciseOptions.label\n\n    editor.completers = editor.completers || []\n    editor.completers.push({ getCompletions: getCompletions })\n    editor.setOptions({\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: false\n    })\n    editor.keyBinding.addKeyboardHandler({ handleKeyboard: autocompleteKeyboardHandler })\n  }\n\n  function autocompleteKeyboardHandler (data, hash, keyString, keyCode, event) {\n    if (hash !== -1 && data.editor) {\n      const modifierCombo = modifierCombination(event)\n      if ((keyCode === kKeycodeSpace && modifierCombo === kModifierKeyCtrl) ||\n          (keyCode === kKeycodeTab && modifierCombo === kModifierKeyNone &&\n            (!data.editor.completer || !data.editor.completer.activated))) {\n        // cancel any pending autocomplete\n        clearTimeout(autocompleteTimerId)\n        if (isPopupOpen(data.editor)) {\n          data.editor.completer.popup.hide()\n          return { command: 'null' }\n        } else {\n          return { command: 'startAutocomplete' }\n        }\n      }\n    }\n  }\n\n  $(function () {\n    $('.examinr-exercise').each(initializeExerciseAutocomplete)\n  })\n}())\n","exports.sections = (function () {\n  'use strict'\n\n  const recalculatedDelay = 250\n  let currentSectionEl\n  let currentSection = {}\n  let actualSections\n\n  function finishedRecalculating () {\n    exports.utils.toggleShim($('body'), false)\n  }\n\n  Shiny.addCustomMessageHandler('__.examinr.__-sectionChange', function (section) {\n    if (section) {\n      if (section.feedback === true) {\n        // Redirect to the feedback\n        window.location.search = '?display=feedback'\n      }\n\n      if (currentSectionEl && currentSectionEl.length > 0) {\n        currentSectionEl.removeAttr('role').hide()\n      } else if (section.id) {\n        $('section.level1').hide()\n      }\n      currentSection = section\n      currentSectionEl = $('#' + currentSection.id).parent()\n        .show()\n        .attr('role', 'main')\n        .trigger('shown')\n\n      const outputElements = currentSectionEl.find('.shiny-bound-output')\n      let recalculating = outputElements.length\n      if (recalculating > 0) {\n        // Assume that all outputs need to be recalculated.\n        // If not, call finishedRecalculating() after a set delay.\n        let recalculatingTimerId = window.setTimeout(finishedRecalculating, recalculatedDelay)\n        outputElements.one('shiny:recalculated', function () {\n          --recalculating\n          if (recalculating <= 0) {\n            // All outputs have been recalculated.\n            finishedRecalculating()\n          } else {\n            // Some outputs are still to be recalculated. Wait for them a short while, otherwise call\n            // finishedRecalculating()\n            window.clearTimeout(recalculatingTimerId)\n            recalculatingTimerId = window.setTimeout(finishedRecalculating, recalculatedDelay)\n          }\n        })\n      } else {\n        finishedRecalculating()\n      }\n\n      exports.status.resetMessages()\n      if (section.order) {\n        exports.attempt.updateSection(section.order)\n      }\n    }\n  })\n\n  $(function () {\n    const sectionsConfig = JSON.parse($('script.examinr-sections-config').remove().text() || '{}')\n\n    actualSections = $('section.level1')\n    // Add the correct label to each section\n    actualSections.each(function () {\n      const el = $(this)\n      exports.accessibility.ariaLabelledBy(el, el.children('h1'))\n    })\n\n    $('.examinr-section-next').click(function () {\n      exports.utils.toggleShim($('body'), true)\n    })\n\n    if (!sectionsConfig.progressive) {\n      // All-at-once exam. Show the \"next button\" only for the last real section.\n      $('.examinr-section-next').hide()\n      exports.accessibility.ariaLabelledBy($('main'), $('h1.title'))\n\n      // hide the last section (used for final remarks)\n      if (sectionsConfig.hideLastSection) {\n        actualSections.last().hide()\n        actualSections = actualSections.slice(0, -1)\n        actualSections.last().find('.examinr-section-next').show()\n      }\n    } else {\n      // progressive exams: hide all sections\n      actualSections.hide()\n      if (sectionsConfig.hideLastSection) {\n        $('section.level1:last .examinr-section-next').remove()\n        actualSections = actualSections.slice(0, -1)\n      }\n    }\n  })\n\n  return {\n    showAll: function () {\n      actualSections.show().trigger('shown')\n    }\n  }\n}())\n","exports.grading = (function () {\n  'use strict'\n\n  function updateGrading (question, gradingData) {\n    // Save locally\n    question.data('gradingData', gradingData)\n\n    // And remotely\n    if (!gradingData.feedbackShown) {\n      gradingData.feedback = null\n    }\n    Shiny.setInputValue('__.examinr.__-gradingData', gradingData)\n  }\n\n  function toggleFeedback () {\n    const btn = $(this)\n    const question = btn.parents('.examinr-question')\n    const gradingData = question.data('grading') || {}\n    if (gradingData.feedbackShown) {\n      btn.children('.btn-label').text('+')\n      btn.children('.sr-only').text('Add comment')\n      question.data('feedbackShown', false)\n        .find('.examinr-grading-feedback')\n        .remove()\n    } else {\n      btn.children('.btn-label').html('&times;')\n      btn.children('.sr-only').text('Remove comment')\n      let footer = question.find('.card-footer')\n      if (footer.length === 0) {\n        footer = $('<div class=\"card-footer\">')\n        footer.appendTo(question.hasClass('card') ? question : question.find('.card'))\n      }\n      question.data('feedbackShown', true)\n\n      const commentInputId = exports.utils.randomId('comment-')\n\n      footer.append(\n        '<div class=\"input-group examinr-grading-feedback\">' +\n          '<div class=\"input-group-prepend\">' +\n            '<label class=\"input-group-text\" for=\"' + commentInputId + '\">' +\n              exports.status.getMessage('feedback').commentLabel +\n            '</label>' +\n          '</div>' +\n          '<textarea class=\"form-control\" id=\"' + commentInputId + '\">' +\n            (gradingData.feedback || '') +\n          '</textarea>' +\n        '</div>')\n\n      question.find('.examinr-grading-feedback textarea').on('change', function () {\n        const gradingData = question.data('grading') || {}\n        gradingData.feedback = $(this).val()\n        updateGrading(question, gradingData)\n      })\n    }\n    gradingData.feedbackShown = !gradingData.feedbackShown\n    updateGrading(question, gradingData)\n  }\n\n  function prepareQuestion () {\n    const question = $(this)\n    const gradingData = question.data('grading') || {}\n    const pointsEl = question.find('.examinr-points')\n    const container = pointsEl.parent()\n    const placeholder = pointsEl.remove().text()\n\n    if (!gradingData.maxPoints) {\n      gradingData.maxPoints = parseFloat(question.data('maxPoints')) || 1\n    }\n\n    const pointsInput = $('<input type=\"number\" class=\"form-control\" />')\n      .attr('max', gradingData.maxPoints)\n      .attr('id', exports.utils.randomId())\n\n    const feedbackBtn = gradingData.feedbackShown ? '&times;' : '+'\n    const feedbackLabel = gradingData.feedbackShown ? 'Remove feedback' : 'Add feedback'\n\n    container.addClass('clearfix')\n      .append('<div class=\"input-group input-group-sm examinr-grading-points\">' +\n        '<label class=\"sr-only\" for=\"' + pointsInput.attr('id') + '\">Points</label>' +\n        '<div class=\"input-group-append\">' +\n          '<span class=\"input-group-text\">/ ' + placeholder + '</span>' +\n          '<button type=\"button\" class=\"btn btn-secondary\">' +\n            '<span class=\"btn-label\" aria-hidden=\"true\">' + feedbackBtn + '</span>' +\n            '<span class=\"sr-only\">' + feedbackLabel + '</span>' +\n          '</button>' +\n        '</div>' +\n      '</div>')\n      .find('.input-group')\n      .prepend(pointsInput)\n\n    question.data('grading', gradingData)\n    container.find('.btn').click(toggleFeedback)\n    exports.utils.disableNumberInputDefaults(pointsInput)\n  }\n\n  function startGrading () {\n    exports.status.disableProgress()\n    const statusContainer = exports.status.statusContainer()\n\n    const studentNameInputId = exports.utils.randomId('student-name')\n    const attemptInputId = exports.utils.randomId('attempt')\n\n    statusContainer.append(\n      '<form class=\"form-inline examinr-grading-attempt\">' +\n        '<div class=\"input-group input-group-sm\">' +\n          '<div class=\"input-group-prepend\">' +\n            '<button class=\"btn btn-secondary\" type=\"button\">' +\n              '<span aria-hidden=\"true\">&lt;</span>' +\n              '<span class=\"sr-only\">Previous student</span>' +\n            '</button>' +\n          '</div>' +\n          '<label class=\"sr-only\" for=\"' + studentNameInputId + '\">Student</label>' +\n          '<input type=\"text\" id=\"' + studentNameInputId + '\" class=\"form-control\" placeholder=\"Student\" />' +\n          '<span class=\"input-group-append\">' +\n            '<button class=\"btn btn-secondary\" type=\"button\">' +\n              '<span aria-hidden=\"true\">&gt;</span>' +\n              '<span class=\"sr-only\">Next Student</span>' +\n            '</button>' +\n          '</span>' +\n        '</div>' +\n        '<div class=\"input-group input-group-sm\">' +\n          '<label class=\"sr-only\" for=\"' + attemptInputId + '\">Attempt</label>' +\n          '<select id=\"' + attemptInputId + '\" class=\"form-control\" disabled></select>' +\n        '</div>' +\n      '</form>'\n    )\n\n    exports.status.fixMainOffset()\n\n    // Prepare the questions\n    $('.examinr-question').each(prepareQuestion)\n  }\n\n  return {\n    startGrading: startGrading\n  }\n}())\n","ace.define('ace/theme/monochrome', ['require', 'exports', 'module', 'ace/lib/dom'], function (acequire, exports, module) {\n  exports.isDark = false\n  exports.cssClass = 'ace-monochrome'\n  exports.cssText = '.ace-monochrome .ace_gutter{background:#000;color:#fff}.ace-monochrome.ace_print-margin{width:2px;background:#999}.ace-monochrome .ace_editor{background-color:#fff;color:#000}.ace-monochrome .ace_cursor{color:#000;border:0;border-right:0;border-left:.5em solid #000}.ace-monochrome .ace_marker-layer .ace_selection{background:#777}.ace-monochrome.ace_multiselect .ace_selection.ace_start{border-radius:2px}.ace-monochrome .ace_marker-layer .ace_step{background:#000}.ace-monochrome .ace_marker-layer .ace_bracket{margin:0;border:2px solid #d55e00}.ace-monochrome .ace_marker-layer .ace_active-line{background:transparent;border:2px solid #d55e00}.ace-monochrome .ace_gutter-active-line{background:#000}.ace-monochrome .ace_marker-layer .ace_selected-word{border:2px dashed #d55e00}.ace-monochrome .ace_invisible{color:#fff}.ace-monochrome .ace_comment,.ace-monochrome .ace_constant.ace_language{font-style:italic;color:#444}.ace-monochrome .ace_indent-guide{background:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC\") right repeat-y}.ace_layer{z-index:3}.ace_layer.ace_print-margin-layer{z-index:2}.ace_layer.ace_marker-layer{z-index:1}.ace_editor.ace_autocomplete{background:#ccc;border:solid 2px #000 !important;color:#000}.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line,.ace_editor.ace_autocomplete .ace_marker-layer .ace_line-hover{background:#fff;border:0;border:2px dashed #d55e00}'\n  var dom = acequire('../lib/dom')\n  dom.importCssString(exports.cssText, exports.cssClass)\n})\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.5.3): util.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Private TransitionEnd Helpers\n * ------------------------------------------------------------------------\n */\n\nconst TRANSITION_END = 'transitionend'\nconst MAX_UID = 1000000\nconst MILLISECONDS_MULTIPLIER = 1000\n\n// Shoutout AngusCroll (https://goo.gl/pxwQGp)\nfunction toType(obj) {\n  if (obj === null || typeof obj === 'undefined') {\n    return `${obj}`\n  }\n\n  return {}.toString.call(obj).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\nfunction getSpecialTransitionEndEvent() {\n  return {\n    bindType: TRANSITION_END,\n    delegateType: TRANSITION_END,\n    handle(event) {\n      if ($(event.target).is(this)) {\n        return event.handleObj.handler.apply(this, arguments) // eslint-disable-line prefer-rest-params\n      }\n\n      return undefined\n    }\n  }\n}\n\nfunction transitionEndEmulator(duration) {\n  let called = false\n\n  $(this).one(Util.TRANSITION_END, () => {\n    called = true\n  })\n\n  setTimeout(() => {\n    if (!called) {\n      Util.triggerTransitionEnd(this)\n    }\n  }, duration)\n\n  return this\n}\n\nfunction setTransitionEndSupport() {\n  $.fn.emulateTransitionEnd = transitionEndEmulator\n  $.event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent()\n}\n\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\n\nconst Util = {\n  TRANSITION_END: 'bsTransitionEnd',\n\n  getUID(prefix) {\n    do {\n      prefix += ~~(Math.random() * MAX_UID) // \"~~\" acts like a faster Math.floor() here\n    } while (document.getElementById(prefix))\n\n    return prefix\n  },\n\n  getSelectorFromElement(element) {\n    let selector = element.getAttribute('data-target')\n\n    if (!selector || selector === '#') {\n      const hrefAttr = element.getAttribute('href')\n      selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : ''\n    }\n\n    try {\n      return document.querySelector(selector) ? selector : null\n    } catch (_) {\n      return null\n    }\n  },\n\n  getTransitionDurationFromElement(element) {\n    if (!element) {\n      return 0\n    }\n\n    // Get transition-duration of the element\n    let transitionDuration = $(element).css('transition-duration')\n    let transitionDelay = $(element).css('transition-delay')\n\n    const floatTransitionDuration = parseFloat(transitionDuration)\n    const floatTransitionDelay = parseFloat(transitionDelay)\n\n    // Return 0 if element or transition duration is not found\n    if (!floatTransitionDuration && !floatTransitionDelay) {\n      return 0\n    }\n\n    // If multiple durations are defined, take the first\n    transitionDuration = transitionDuration.split(',')[0]\n    transitionDelay = transitionDelay.split(',')[0]\n\n    return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n  },\n\n  reflow(element) {\n    return element.offsetHeight\n  },\n\n  triggerTransitionEnd(element) {\n    $(element).trigger(TRANSITION_END)\n  },\n\n  supportsTransitionEnd() {\n    return Boolean(TRANSITION_END)\n  },\n\n  isElement(obj) {\n    return (obj[0] || obj).nodeType\n  },\n\n  typeCheckConfig(componentName, config, configTypes) {\n    for (const property in configTypes) {\n      if (Object.prototype.hasOwnProperty.call(configTypes, property)) {\n        const expectedTypes = configTypes[property]\n        const value = config[property]\n        const valueType = value && Util.isElement(value) ?\n          'element' : toType(value)\n\n        if (!new RegExp(expectedTypes).test(valueType)) {\n          throw new Error(\n            `${componentName.toUpperCase()}: ` +\n            `Option \"${property}\" provided type \"${valueType}\" ` +\n            `but expected type \"${expectedTypes}\".`)\n        }\n      }\n    }\n  },\n\n  findShadowRoot(element) {\n    if (!document.documentElement.attachShadow) {\n      return null\n    }\n\n    // Can find the shadow root otherwise it'll return the document\n    if (typeof element.getRootNode === 'function') {\n      const root = element.getRootNode()\n      return root instanceof ShadowRoot ? root : null\n    }\n\n    if (element instanceof ShadowRoot) {\n      return element\n    }\n\n    // when we don't find a shadow root\n    if (!element.parentNode) {\n      return null\n    }\n\n    return Util.findShadowRoot(element.parentNode)\n  },\n\n  jQueryDetection() {\n    if (typeof $ === 'undefined') {\n      throw new TypeError('Bootstrap\\'s JavaScript requires jQuery. jQuery must be included before Bootstrap\\'s JavaScript.')\n    }\n\n    const version = $.fn.jquery.split(' ')[0].split('.')\n    const minMajor = 1\n    const ltMajor = 2\n    const minMinor = 9\n    const minPatch = 1\n    const maxMajor = 4\n\n    if (version[0] < ltMajor && version[1] < minMinor || version[0] === minMajor && version[1] === minMinor && version[2] < minPatch || version[0] >= maxMajor) {\n      throw new Error('Bootstrap\\'s JavaScript requires at least jQuery v1.9.1 but less than v4.0.0')\n    }\n  }\n}\n\nUtil.jQueryDetection()\nsetTransitionEndSupport()\n\nexport default Util\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.5.3): modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'modal'\nconst VERSION = '4.5.3'\nconst DATA_KEY = 'bs.modal'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\nconst ESCAPE_KEYCODE = 27 // KeyboardEvent.which value for Escape (Esc) key\n\nconst Default = {\n  backdrop: true,\n  keyboard: true,\n  focus: true,\n  show: true\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  keyboard: 'boolean',\n  focus: 'boolean',\n  show: 'boolean'\n}\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_FOCUSIN = `focusin${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEUP_DISMISS = `mouseup.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SCROLLABLE = 'modal-dialog-scrollable'\nconst CLASS_NAME_SCROLLBAR_MEASURER = 'modal-scrollbar-measure'\nconst CLASS_NAME_BACKDROP = 'modal-backdrop'\nconst CLASS_NAME_OPEN = 'modal-open'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_STATIC = 'modal-static'\n\nconst SELECTOR_DIALOG = '.modal-dialog'\nconst SELECTOR_MODAL_BODY = '.modal-body'\nconst SELECTOR_DATA_TOGGLE = '[data-toggle=\"modal\"]'\nconst SELECTOR_DATA_DISMISS = '[data-dismiss=\"modal\"]'\nconst SELECTOR_FIXED_CONTENT = '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top'\nconst SELECTOR_STICKY_CONTENT = '.sticky-top'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Modal {\n  constructor(element, config) {\n    this._config = this._getConfig(config)\n    this._element = element\n    this._dialog = element.querySelector(SELECTOR_DIALOG)\n    this._backdrop = null\n    this._isShown = false\n    this._isBodyOverflowing = false\n    this._ignoreBackdropClick = false\n    this._isTransitioning = false\n    this._scrollbarWidth = 0\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  // Public\n\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return\n    }\n\n    if ($(this._element).hasClass(CLASS_NAME_FADE)) {\n      this._isTransitioning = true\n    }\n\n    const showEvent = $.Event(EVENT_SHOW, {\n      relatedTarget\n    })\n\n    $(this._element).trigger(showEvent)\n\n    if (this._isShown || showEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._isShown = true\n\n    this._checkScrollbar()\n    this._setScrollbar()\n\n    this._adjustDialog()\n\n    this._setEscapeEvent()\n    this._setResizeEvent()\n\n    $(this._element).on(\n      EVENT_CLICK_DISMISS,\n      SELECTOR_DATA_DISMISS,\n      event => this.hide(event)\n    )\n\n    $(this._dialog).on(EVENT_MOUSEDOWN_DISMISS, () => {\n      $(this._element).one(EVENT_MOUSEUP_DISMISS, event => {\n        if ($(event.target).is(this._element)) {\n          this._ignoreBackdropClick = true\n        }\n      })\n    })\n\n    this._showBackdrop(() => this._showElement(relatedTarget))\n  }\n\n  hide(event) {\n    if (event) {\n      event.preventDefault()\n    }\n\n    if (!this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const hideEvent = $.Event(EVENT_HIDE)\n\n    $(this._element).trigger(hideEvent)\n\n    if (!this._isShown || hideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._isShown = false\n    const transition = $(this._element).hasClass(CLASS_NAME_FADE)\n\n    if (transition) {\n      this._isTransitioning = true\n    }\n\n    this._setEscapeEvent()\n    this._setResizeEvent()\n\n    $(document).off(EVENT_FOCUSIN)\n\n    $(this._element).removeClass(CLASS_NAME_SHOW)\n\n    $(this._element).off(EVENT_CLICK_DISMISS)\n    $(this._dialog).off(EVENT_MOUSEDOWN_DISMISS)\n\n    if (transition) {\n      const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n      $(this._element)\n        .one(Util.TRANSITION_END, event => this._hideModal(event))\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      this._hideModal()\n    }\n  }\n\n  dispose() {\n    [window, this._element, this._dialog]\n      .forEach(htmlElement => $(htmlElement).off(EVENT_KEY))\n\n    /**\n     * `document` has 2 events `EVENT_FOCUSIN` and `EVENT_CLICK_DATA_API`\n     * Do not move `document` in `htmlElements` array\n     * It will remove `EVENT_CLICK_DATA_API` event that should remain\n     */\n    $(document).off(EVENT_FOCUSIN)\n\n    $.removeData(this._element, DATA_KEY)\n\n    this._config = null\n    this._element = null\n    this._dialog = null\n    this._backdrop = null\n    this._isShown = null\n    this._isBodyOverflowing = null\n    this._ignoreBackdropClick = null\n    this._isTransitioning = null\n    this._scrollbarWidth = null\n  }\n\n  handleUpdate() {\n    this._adjustDialog()\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...config\n    }\n    Util.typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _triggerBackdropTransition() {\n    if (this._config.backdrop === 'static') {\n      const hideEventPrevented = $.Event(EVENT_HIDE_PREVENTED)\n\n      $(this._element).trigger(hideEventPrevented)\n      if (hideEventPrevented.isDefaultPrevented()) {\n        return\n      }\n\n      const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n\n      if (!isModalOverflowing) {\n        this._element.style.overflowY = 'hidden'\n      }\n\n      this._element.classList.add(CLASS_NAME_STATIC)\n\n      const modalTransitionDuration = Util.getTransitionDurationFromElement(this._dialog)\n      $(this._element).off(Util.TRANSITION_END)\n\n      $(this._element).one(Util.TRANSITION_END, () => {\n        this._element.classList.remove(CLASS_NAME_STATIC)\n        if (!isModalOverflowing) {\n          $(this._element).one(Util.TRANSITION_END, () => {\n            this._element.style.overflowY = ''\n          })\n            .emulateTransitionEnd(this._element, modalTransitionDuration)\n        }\n      })\n        .emulateTransitionEnd(modalTransitionDuration)\n      this._element.focus()\n    } else {\n      this.hide()\n    }\n  }\n\n  _showElement(relatedTarget) {\n    const transition = $(this._element).hasClass(CLASS_NAME_FADE)\n    const modalBody = this._dialog ? this._dialog.querySelector(SELECTOR_MODAL_BODY) : null\n\n    if (!this._element.parentNode ||\n        this._element.parentNode.nodeType !== Node.ELEMENT_NODE) {\n      // Don't move modal's DOM position\n      document.body.appendChild(this._element)\n    }\n\n    this._element.style.display = 'block'\n    this._element.removeAttribute('aria-hidden')\n    this._element.setAttribute('aria-modal', true)\n    this._element.setAttribute('role', 'dialog')\n\n    if ($(this._dialog).hasClass(CLASS_NAME_SCROLLABLE) && modalBody) {\n      modalBody.scrollTop = 0\n    } else {\n      this._element.scrollTop = 0\n    }\n\n    if (transition) {\n      Util.reflow(this._element)\n    }\n\n    $(this._element).addClass(CLASS_NAME_SHOW)\n\n    if (this._config.focus) {\n      this._enforceFocus()\n    }\n\n    const shownEvent = $.Event(EVENT_SHOWN, {\n      relatedTarget\n    })\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._element.focus()\n      }\n\n      this._isTransitioning = false\n      $(this._element).trigger(shownEvent)\n    }\n\n    if (transition) {\n      const transitionDuration = Util.getTransitionDurationFromElement(this._dialog)\n\n      $(this._dialog)\n        .one(Util.TRANSITION_END, transitionComplete)\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      transitionComplete()\n    }\n  }\n\n  _enforceFocus() {\n    $(document)\n      .off(EVENT_FOCUSIN) // Guard against infinite focus loop\n      .on(EVENT_FOCUSIN, event => {\n        if (document !== event.target &&\n            this._element !== event.target &&\n            $(this._element).has(event.target).length === 0) {\n          this._element.focus()\n        }\n      })\n  }\n\n  _setEscapeEvent() {\n    if (this._isShown) {\n      $(this._element).on(EVENT_KEYDOWN_DISMISS, event => {\n        if (this._config.keyboard && event.which === ESCAPE_KEYCODE) {\n          event.preventDefault()\n          this.hide()\n        } else if (!this._config.keyboard && event.which === ESCAPE_KEYCODE) {\n          this._triggerBackdropTransition()\n        }\n      })\n    } else if (!this._isShown) {\n      $(this._element).off(EVENT_KEYDOWN_DISMISS)\n    }\n  }\n\n  _setResizeEvent() {\n    if (this._isShown) {\n      $(window).on(EVENT_RESIZE, event => this.handleUpdate(event))\n    } else {\n      $(window).off(EVENT_RESIZE)\n    }\n  }\n\n  _hideModal() {\n    this._element.style.display = 'none'\n    this._element.setAttribute('aria-hidden', true)\n    this._element.removeAttribute('aria-modal')\n    this._element.removeAttribute('role')\n    this._isTransitioning = false\n    this._showBackdrop(() => {\n      $(document.body).removeClass(CLASS_NAME_OPEN)\n      this._resetAdjustments()\n      this._resetScrollbar()\n      $(this._element).trigger(EVENT_HIDDEN)\n    })\n  }\n\n  _removeBackdrop() {\n    if (this._backdrop) {\n      $(this._backdrop).remove()\n      this._backdrop = null\n    }\n  }\n\n  _showBackdrop(callback) {\n    const animate = $(this._element).hasClass(CLASS_NAME_FADE) ?\n      CLASS_NAME_FADE : ''\n\n    if (this._isShown && this._config.backdrop) {\n      this._backdrop = document.createElement('div')\n      this._backdrop.className = CLASS_NAME_BACKDROP\n\n      if (animate) {\n        this._backdrop.classList.add(animate)\n      }\n\n      $(this._backdrop).appendTo(document.body)\n\n      $(this._element).on(EVENT_CLICK_DISMISS, event => {\n        if (this._ignoreBackdropClick) {\n          this._ignoreBackdropClick = false\n          return\n        }\n\n        if (event.target !== event.currentTarget) {\n          return\n        }\n\n        this._triggerBackdropTransition()\n      })\n\n      if (animate) {\n        Util.reflow(this._backdrop)\n      }\n\n      $(this._backdrop).addClass(CLASS_NAME_SHOW)\n\n      if (!callback) {\n        return\n      }\n\n      if (!animate) {\n        callback()\n        return\n      }\n\n      const backdropTransitionDuration = Util.getTransitionDurationFromElement(this._backdrop)\n\n      $(this._backdrop)\n        .one(Util.TRANSITION_END, callback)\n        .emulateTransitionEnd(backdropTransitionDuration)\n    } else if (!this._isShown && this._backdrop) {\n      $(this._backdrop).removeClass(CLASS_NAME_SHOW)\n\n      const callbackRemove = () => {\n        this._removeBackdrop()\n        if (callback) {\n          callback()\n        }\n      }\n\n      if ($(this._element).hasClass(CLASS_NAME_FADE)) {\n        const backdropTransitionDuration = Util.getTransitionDurationFromElement(this._backdrop)\n\n        $(this._backdrop)\n          .one(Util.TRANSITION_END, callbackRemove)\n          .emulateTransitionEnd(backdropTransitionDuration)\n      } else {\n        callbackRemove()\n      }\n    } else if (callback) {\n      callback()\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  // the following methods are used to handle overflowing modals\n  // todo (fat): these should probably be refactored out of modal.js\n  // ----------------------------------------------------------------------\n\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n\n    if (!this._isBodyOverflowing && isModalOverflowing) {\n      this._element.style.paddingLeft = `${this._scrollbarWidth}px`\n    }\n\n    if (this._isBodyOverflowing && !isModalOverflowing) {\n      this._element.style.paddingRight = `${this._scrollbarWidth}px`\n    }\n  }\n\n  _resetAdjustments() {\n    this._element.style.paddingLeft = ''\n    this._element.style.paddingRight = ''\n  }\n\n  _checkScrollbar() {\n    const rect = document.body.getBoundingClientRect()\n    this._isBodyOverflowing = Math.round(rect.left + rect.right) < window.innerWidth\n    this._scrollbarWidth = this._getScrollbarWidth()\n  }\n\n  _setScrollbar() {\n    if (this._isBodyOverflowing) {\n      // Note: DOMNode.style.paddingRight returns the actual value or '' if not set\n      //   while $(DOMNode).css('padding-right') returns the calculated value or 0 if not set\n      const fixedContent = [].slice.call(document.querySelectorAll(SELECTOR_FIXED_CONTENT))\n      const stickyContent = [].slice.call(document.querySelectorAll(SELECTOR_STICKY_CONTENT))\n\n      // Adjust fixed content padding\n      $(fixedContent).each((index, element) => {\n        const actualPadding = element.style.paddingRight\n        const calculatedPadding = $(element).css('padding-right')\n        $(element)\n          .data('padding-right', actualPadding)\n          .css('padding-right', `${parseFloat(calculatedPadding) + this._scrollbarWidth}px`)\n      })\n\n      // Adjust sticky content margin\n      $(stickyContent).each((index, element) => {\n        const actualMargin = element.style.marginRight\n        const calculatedMargin = $(element).css('margin-right')\n        $(element)\n          .data('margin-right', actualMargin)\n          .css('margin-right', `${parseFloat(calculatedMargin) - this._scrollbarWidth}px`)\n      })\n\n      // Adjust body padding\n      const actualPadding = document.body.style.paddingRight\n      const calculatedPadding = $(document.body).css('padding-right')\n      $(document.body)\n        .data('padding-right', actualPadding)\n        .css('padding-right', `${parseFloat(calculatedPadding) + this._scrollbarWidth}px`)\n    }\n\n    $(document.body).addClass(CLASS_NAME_OPEN)\n  }\n\n  _resetScrollbar() {\n    // Restore fixed content padding\n    const fixedContent = [].slice.call(document.querySelectorAll(SELECTOR_FIXED_CONTENT))\n    $(fixedContent).each((index, element) => {\n      const padding = $(element).data('padding-right')\n      $(element).removeData('padding-right')\n      element.style.paddingRight = padding ? padding : ''\n    })\n\n    // Restore sticky content\n    const elements = [].slice.call(document.querySelectorAll(`${SELECTOR_STICKY_CONTENT}`))\n    $(elements).each((index, element) => {\n      const margin = $(element).data('margin-right')\n      if (typeof margin !== 'undefined') {\n        $(element).css('margin-right', margin).removeData('margin-right')\n      }\n    })\n\n    // Restore body padding\n    const padding = $(document.body).data('padding-right')\n    $(document.body).removeData('padding-right')\n    document.body.style.paddingRight = padding ? padding : ''\n  }\n\n  _getScrollbarWidth() { // thx d.walsh\n    const scrollDiv = document.createElement('div')\n    scrollDiv.className = CLASS_NAME_SCROLLBAR_MEASURER\n    document.body.appendChild(scrollDiv)\n    const scrollbarWidth = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth\n    document.body.removeChild(scrollDiv)\n    return scrollbarWidth\n  }\n\n  // Static\n\n  static _jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      const _config = {\n        ...Default,\n        ...$(this).data(),\n        ...(typeof config === 'object' && config ? config : {})\n      }\n\n      if (!data) {\n        data = new Modal(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config](relatedTarget)\n      } else if (_config.show) {\n        data.show(relatedTarget)\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document).on(EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  let target\n  const selector = Util.getSelectorFromElement(this)\n\n  if (selector) {\n    target = document.querySelector(selector)\n  }\n\n  const config = $(target).data(DATA_KEY) ?\n    'toggle' : {\n      ...$(target).data(),\n      ...$(this).data()\n    }\n\n  if (this.tagName === 'A' || this.tagName === 'AREA') {\n    event.preventDefault()\n  }\n\n  const $target = $(target).one(EVENT_SHOW, showEvent => {\n    if (showEvent.isDefaultPrevented()) {\n      // Only register focus restorer if modal will actually get shown\n      return\n    }\n\n    $target.one(EVENT_HIDDEN, () => {\n      if ($(this).is(':visible')) {\n        this.focus()\n      }\n    })\n  })\n\n  Modal._jQueryInterface.call($(target), config, this)\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Modal._jQueryInterface\n$.fn[NAME].Constructor = Modal\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Modal._jQueryInterface\n}\n\nexport default Modal\n"],"file":"exam.js"}