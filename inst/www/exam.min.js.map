{"version":3,"sources":["../../srcwww/_header.js","../../srcwww/utils.js","../../srcwww/accessibility.js","../../srcwww/status.js","../../srcwww/attempt.js","../../srcwww/feedback.js","../../srcwww/exercises.js","../../srcwww/autocomplete.js","../../srcwww/sections.js","../../srcwww/grading.js","../../srcwww/ace-monochrome.js","../../srcwww/lib/bootstrap/src/util.js","../../srcwww/lib/bootstrap/src/modal.js"],"names":["exports","window","Exam","utils","preventDefault","e","generateRandomId","prefix","Math","random","toString","slice","storeGet","key","JSON","parse","localStorage","getItem","storeSet","value","setItem","stringify","storeRemove","removeItem","initNumericInputs","numRegexp","$","each","input","this","feedbackId","randomId","change","newVal","val","remove","test","attr","addClass","after","length","parseFloat","removeAttr","removeClass","lang","store","get","set","rem","formatDate","timestamp","Date","toLocaleString","disableNumberInputDefaults","numberInputs","on","which","off","debounce","fun","wait","immediate","timerId","context","args","arguments","delayed","apply","callImmediately","clearTimeout","setTimeout","triggerMathJax","id","isDummy","MathJax","startup","promise","then","el","parent","append","html","typesetPromise","err","console","warn","message","renderMathJax","toggleShim","show","spinOverlay","children","prepend","op","offsetParent","accessibility","getOrMakeId","newId","ariaAssociate","ariaAttribute","target","ref","evalMediaQueryList","mql","media","matches","useHighContrast","stored","matchMedia","highContrastTheme","enabled","exercises","click","hasClass","question","find","ariaLabelledBy","labelEl","ariaDescribedBy","status","fixMainOffset","statusContainer","css","outerHeight","parseTimestamp","parseInt","text","isNaN","showErrorDialog","title","content","action","button","triggerId","triggerEvent","triggerDelay","closeBtn","dialogContainerFooter","dialogContainerTitle","dialogContainerContent","hide","one","location","reload","trigger","dialogContainer","appendTo","document","body","detach","modal","keyboard","backdrop","messages","defaultContext","currentContext","statusMessageEl","Shiny","addCustomMessageHandler","condition","type","alertContext","resetMessages","getMessage","what","setContext","where","attempt","toBase10","updateTimeLeft","msLeft","timelimit","Number","POSITIVE_INFINITY","timerEl","progressEl","config","gracePeriod","hrsLeft","floor","minLeft","secLeft","timerIsShown","timelimitTimer","timeoutMsg","active","progressMsg","sectionProgress","section","replace","totalSections","timerHtml","timer","progressive","haveTimelimit","combined","progressbar","progressbarEl","updateSection","currentSectionNr","width","round","feedback","runAfterUpdate","func","shinyRenderDelay","attemptChanged","sel","setInputValue","questionFooter","card","footer","renderDefaultFeedback","badge","points","maxPoints","solution","solutionLabel","comment","commentLabel","pointsEl","correctIcon","incorrectIcon","numFormat","Intl","NumberFormat","undefined","signDisplay","style","minimumSignificantDigits","maximumSignificantDigits","feedbackRenderer","data","sections","showAll","options","disabled","otherAttempts","map","at","finishedAt","join","selId","attemptLabel","feedbackMap","Object","fromEntries","qid","totalPoints","awardedPoints","label","i","end","filter","selector","callback","NaN","push","prop","answer","cbs","forEach","weight","weightStr","format","correctValues","Set","cb","has","editor","setReadOnly","getSession","setValue","registerFeedbackRenderer","unshift","attachAceEditor","code","ace","edit","setHighlightActiveLine","setShowPrintMargin","setShowFoldWidgets","setBehavioursEnabled","renderer","setDisplayIndentGuides","setTheme","currentTheme","$blockScrolling","Infinity","session","setMode","getSelection","clearSelection","exerciseRunning","outputContainer","running","exerciseRunButtonEnabled","initializeExerciseEditor","exercise","exerciseOptions","codeLines","split","lines","max","min","kMinLines","kMaxDefaultLines","repeat","editorId","inputId","pointsLabel","messageStrings","exercisePanel","buttonLabel","notYetRun","outputTitle","exerciseEditor","inputLabel","runCodeButton","triggerClick","setFontSize","commands","addCommand","name","bindKey","win","mac","exec","updateAceHeight","setOptions","minLines","maxLines","focus","parents","resize","initializeEditorBindings","inputBindings","InputBinding","extend","scope","getId","subscribe","unsubscribe","getValue","getTime","register","outputBindings","OutputBinding","outputId","renderValue","result","footerClass","status_class","renderError","error","clearError","kThemeMonochrome","modifierCombination","event","kModifierKeyNone","ctrlKey","kModifierKeyCtrl","altKey","kModifierKeyAlt","metaKey","kModifierKeyMeta","shiftKey","kModifierKeyShift","isPopupOpen","completer","popup","isOpen","getCompletions","position","_","getTextRange","start","row","column","priority","aceAutocompleteCallback","exerciseLabel","initializeExerciseAutocomplete","autocomplete","startAutocomplete","execCommand","onChangeCallback","autocompleteTimerId","pos","getCursorPosition","line","getLine","delayMs","completers","enableBasicAutocompletion","enableLiveAutocompletion","keyBinding","addKeyboardHandler","handleKeyboard","autocompleteKeyboardHandler","hash","keyString","keyCode","modifierCombo","kKeycodeSpace","kKeycodeTab","activated","command","customRCompleter","insertMatch","ranges","selection","getAllRanges","filterLength","completions","filterText","caption","is_function","navigateLeft","suggestions","item","score","meta","x","finishedRecalculating","currentSectionEl","actualSections","recalculatedDelay","currentSection","search","outputElements","recalculating","recalculatingTimerId","order","sectionsConfig","hideLastSection","last","grading","updateGrading","gradingData","feedbackShown","toggleFeedback","btn","commentInputId","prepareQuestion","container","placeholder","pointsInput","feedbackBtn","feedbackLabel","startGrading","disableProgress","studentNameInputId","attemptInputId","define","acequire","module","isDark","cssClass","cssText","importCssString","toType","obj","call","match","toLowerCase","getSpecialTransitionEndEvent","bindType","TRANSITION_END","delegateType","handle","transitionEndEmulator","duration","_this","called","Util","setTransitionEndSupport","MAX_UID","MILLISECONDS_MULTIPLIER","getUID","getSelectorFromElement","element","hrefAttr","getTransitionDurationFromElement","transitionDuration","transitionDelay","floatTransitionDuration","floatTransitionDelay","reflow","offsetHeight","triggerTransitionEnd","supportsTransitionEnd","Boolean","isElement","nodeType","typeCheckConfig","componentName","configTypes","property","expectedTypes","valueType","RegExp","Error","toUpperCase","findShadowRoot","attachShadow","getRootNode","root","ShadowRoot","parentNode","jQueryDetection","TypeError","version","minMinor","_extends","assign","source","prototype","hasOwnProperty","JQUERY_NO_CONFLICT","ESCAPE_KEYCODE","Default","DATA_KEY","$__default","fn","NAME","DefaultType","EVENT_FOCUSIN","EVENT_KEY","EVENT_RESIZE","EVENT_CLICK_DISMISS","EVENT_KEYDOWN_DISMISS","EVENT_MOUSEUP_DISMISS","EVENT_MOUSEDOWN_DISMISS","EVENT_CLICK_DATA_API","CLASS_NAME_SCROLLABLE","CLASS_NAME_SCROLLBAR_MEASURER","CLASS_NAME_BACKDROP","CLASS_NAME_OPEN","CLASS_NAME_FADE","DATA_API_KEY","CLASS_NAME_SHOW","CLASS_NAME_STATIC","SELECTOR_DIALOG","SELECTOR_MODAL_BODY","SELECTOR_DATA_TOGGLE","SELECTOR_DATA_DISMISS","SELECTOR_FIXED_CONTENT","SELECTOR_STICKY_CONTENT","Modal","_isShown","_isBodyOverflowing","_getConfig","_ignoreBackdropClick","_isTransitioning","querySelector","_scrollbarWidth","_proto","toggle","relatedTarget","showEvent","isDefaultPrevented","EVENT_SHOW","_setEscapeEvent","_showBackdrop","_showElement","hideEvent","Event","EVENT_HIDE","transition","_element","_hideModal","_dialog","Util__default","_this2","_backdrop","removeData","handleUpdate","_triggerBackdropTransition","_config","hideEventPrevented","EVENT_HIDE_PREVENTED","modalTransitionDuration","classList","add","emulateTransitionEnd","overflowY","_this3","_this4","appendChild","modalBody","Node","ELEMENT_NODE","removeAttribute","setAttribute","scrollTop","_enforceFocus","shownEvent","EVENT_SHOWN","transitionComplete","_this5","_this6","_setResizeEvent","_this7","_this8","_resetAdjustments","EVENT_HIDDEN","_removeBackdrop","_this9","createElement","animate","backdropTransitionDuration","callbackRemove","_backdropTransitionDuration","_adjustDialog","isModalOverflowing","paddingLeft","paddingRight","_checkScrollbar","rect","_setScrollbar","left","right","innerWidth","_this10","fixedContent","calculatedPadding","stickyContent","actualMargin","marginRight","calculatedMargin","actualPadding","querySelectorAll","elements","margin","index","_getScrollbarWidth","scrollDiv","scrollbarWidth","className","_jQueryInterface","removeChild","_typeof","VERSION","tagName","$target"],"mappings":"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","file":"exam.min.js","sourcesContent":["if (typeof exports === 'undefined') {\n  window.exports = window.Exam = {}\n}\n","exports.utils = (function () {\n  'use strict'\n\n  const arrowKeyUp = 38\n  const arrowKeyDown = 40\n  const lang = $('html').attr('lang') || 'en-US'\n\n  function preventDefault (e) {\n    e.preventDefault()\n  }\n\n  function generateRandomId (prefix) {\n    if (!prefix) {\n      prefix = 'anonymous-el-'\n    }\n    return prefix + Math.random().toString(36).slice(2)\n  }\n\n  function storeGet (key) {\n    return JSON.parse(window.localStorage.getItem('examinr_' + key))\n  }\n\n  function storeSet (key, value) {\n    return window.localStorage.setItem('examinr_' + key, JSON.stringify(value))\n  }\n\n  function storeRemove (key) {\n    return window.localStorage.removeItem('examinr_' + key)\n  }\n\n  function initNumericInputs () {\n    const numRegexp = /^-?(\\d*\\.)?\\d+$/\n    $('.examinr-q-numeric input[type=text]').each(function () {\n      const input = $(this)\n      const feedbackId = exports.utils.randomId()\n\n      input.change(function () {\n        const newVal = input.val()\n        $('#' + feedbackId).remove()\n        if (newVal && !numRegexp.test(newVal)) {\n          input.attr('aria-describedby', feedbackId).addClass('is-invalid')\n            .after('<span id=\"' + feedbackId + '\" class=\"sr-only\">invalid value</span>')\n        } else {\n          if (newVal.length > 0) {\n            input.val(parseFloat(newVal))\n          }\n          input.removeAttr('aria-describedby').removeClass('is-invalid')\n        }\n      })\n    })\n  }\n\n  $(function () {\n    initNumericInputs()\n  })\n\n  return {\n    /**\n     * Enable or disable the high-contrast theme. If the argument is missing, the theme is determined based\n     * on the user's preference or the user-agent settings.\n     *\n     * @param {boolean|undefined} enabled\n     */\n    store: {\n      get: storeGet,\n      set: storeSet,\n      rem: storeRemove\n    },\n\n    /**\n     * Format the given date in the document's language\n     * @param {int} timestamp the timestamp to format\n     */\n    formatDate: function (timestamp) {\n      return new Date(timestamp).toLocaleString(lang)\n    },\n\n    /**\n     * Disable stepping by arrow keys and scrolling on number inputs.\n     *\n     * @param {jQuery} numberInputs the inputs to disable the defaults for.\n     */\n    disableNumberInputDefaults: function (numberInputs) {\n      if (!numberInputs) {\n        numberInputs = $('input[type=number]')\n      }\n\n      numberInputs.on('focus', function () {\n        $(this).on('wheel.disableScrollEvent', preventDefault)\n          .on('keydown.disableScrollEvent', function (e) {\n            if (e.which === arrowKeyDown || e.which === arrowKeyUp) {\n              e.preventDefault()\n            }\n          })\n      }).on('blur', function () {\n        $(this).off('.disableScrollEvent')\n      })\n    },\n    /**\n     * Debounce the given function, calling it only once for a series of shortly spaced calls.\n     * @param {function} fun function to debounce\n     * @param {integer} wait time (in ms) to wait before calling `fun`\n     * @param {boolean} immediate if `fun` should be called immediately on the raising edge, not the falling edge.\n     */\n    debounce: function (fun, wait, immediate) {\n      let timerId = null\n\n      return function () {\n        const context = this\n        const args = arguments\n        const delayed = function () {\n          timerId = null\n          if (!immediate) {\n            fun.apply(context, args)\n          }\n        }\n        const callImmediately = immediate && !timerId\n        window.clearTimeout(timerId)\n        timerId = window.setTimeout(delayed, wait)\n        if (callImmediately) {\n          fun.apply(context, args)\n        }\n      }\n    },\n    randomId: generateRandomId,\n    /**\n     * Render any math in the element with the given id\n     *\n     * @param {string} id id of the element to render math.\n     * @param {boolean} isDummy if true, the id attribute is removed.\n     */\n    triggerMathJax: function (id, isDummy) {\n      if (window.MathJax && window.MathJax.startup && window.MathJax.startup.promise) {\n        window.MathJax.startup.promise = window.MathJax.startup.promise\n          .then(() => {\n            let el = $('#' + id)\n            if (isDummy) {\n              const parent = el.parent()\n              if (parent.length > 0) {\n                parent.append(el.remove().html())\n                el = parent\n              }\n            }\n            return window.MathJax.typesetPromise(el)\n          })\n          .catch((err) => window.console.warn('Cannot typeset math: ', err.message))\n        return window.MathJax.startup.promise\n      }\n    },\n\n    /**\n     * Render any math in the element with the given id\n     *\n     * @param {jQuery} el element to render math in\n     */\n    renderMathJax: function (el) {\n      if (window.MathJax && window.MathJax.startup && window.MathJax.startup.promise) {\n        window.MathJax.startup.promise = window.MathJax.startup.promise\n          .then(() => {\n            return window.MathJax.typesetPromise(el)\n          })\n          .catch((err) => window.console.warn('Cannot typeset math: ', err.message))\n        return window.MathJax.startup.promise\n      }\n    },\n\n    /**\n     * Toggle a \"working\" shim over the given element.\n     * @param {jQuery} el jquery element which should be covered by the shim.\n     * @param {boolean} show force the shim to be shown/hidden, regardless of the current state.\n     */\n    toggleShim: function (el, show) {\n      if (!el) {\n        // Overlay over entire document\n        el = $('body')\n      } else {\n        el = $(el)\n      }\n\n      let spinOverlay = el.children('.examinr-recompute-overlay')\n\n      // If `show` is missing, show the overlay if it's not present at the moment\n      if (typeof show === 'undefined') {\n        show = (spinOverlay.length === 0)\n      }\n\n      if (show === false) {\n        spinOverlay.remove()\n        el.removeClass('examinr-recompute-outer')\n      } else {\n        spinOverlay = $('<div class=\"examinr-recompute-overlay\"><div class=\"examinr-recompute\" role=\"status\">' +\n                          '<span class=\"sr-only\">Loading...</span>' +\n                        '</div></div>')\n        el.prepend(spinOverlay)\n        const op = spinOverlay.offsetParent()\n        if (op.length > 0 && op.get(0) !== el.get(0)) {\n          el.addClass('examinr-recompute-outer')\n        }\n        el.show()\n      }\n    }\n  }\n}())\n","exports.accessibility = (function () {\n  'use strict'\n\n  function getOrMakeId (el) {\n    if (el.attr('id')) {\n      return el.attr('id')\n    }\n    const newId = exports.utils.randomId('aria-el-')\n    el.attr('id', newId)\n    return newId\n  }\n\n  function ariaAssociate (ariaAttribute, target, ref) {\n    target.attr('aria-' + ariaAttribute, getOrMakeId(ref))\n  }\n\n  /**\n   * Determine if the given media query list is (a) not supported or (b) matches.\n   * @param {MediaQueryList} mql\n   */\n  function evalMediaQueryList (mql) {\n    return (mql.media === 'not all') || mql.matches\n  }\n\n  function useHighContrast () {\n    const stored = exports.utils.store.get('highContrast')\n    if (stored === null) {\n      // Determine based on the user-agent settings.\n      return !(evalMediaQueryList(window.matchMedia('not speech')) &&\n        evalMediaQueryList(window.matchMedia('(monochrome: 0)')) &&\n        evalMediaQueryList(window.matchMedia('(forced-colors: none)')) &&\n        evalMediaQueryList(window.matchMedia('(inverted-colors: none)')) &&\n        evalMediaQueryList(window.matchMedia('not (prefers-contrast: more)')))\n    }\n    return (stored !== false)\n  }\n\n  /**\n  * Enable or disable the high-contrast theme. If the argument is missing, the theme is determined based\n  * on the user's preference or the user-agent settings.\n  *\n  * @param {boolean|undefined} enabled\n  */\n  function highContrastTheme (enabled) {\n    if (enabled !== true && enabled !== false) {\n      enabled = useHighContrast()\n    }\n    if (enabled) {\n      enabled = true\n      $('html').addClass('high-contrast')\n    } else {\n      $('html').removeClass('high-contrast')\n      enabled = false\n    }\n    exports.utils.store.set('highContrast', enabled)\n    exports.exercises.highContrastTheme(enabled)\n    exports.utils.store.set('highContrast', enabled)\n  }\n\n  $(function () {\n    $('a:empty').attr('aria-hidden', 'true')\n    highContrastTheme()\n    $('.btn-high-contrast').click(function () {\n      highContrastTheme(!$('html').hasClass('high-contrast'))\n    })\n\n    // add labels to question containers and hide labels from UI if requested\n    $('.examinr-question').each(function () {\n      const question = $(this)\n      question.find('.hide-label .control-label').addClass('sr-only')\n      ariaAssociate('labelledby', question, question.find('.card-header'))\n    })\n  })\n\n  return {\n    /**\n     * Enable or disable the high-contrast theme. If the argument is missing, the theme is determined based\n     * on the user's preference or the user-agent settings.\n     *\n     * @param {boolean|undefined} enabled\n     */\n    highContrastTheme: highContrastTheme,\n    ariaAssociate: ariaAssociate,\n    ariaLabelledBy: function (el, labelEl) {\n      ariaAssociate('labelledby', el, labelEl)\n    },\n    ariaDescribedBy: function (el, labelEl) {\n      ariaAssociate('describedby', el, labelEl)\n    }\n  }\n}())\n","exports.status = (function () {\n  'use strict'\n\n  let messages = {}\n  let statusContainer\n  const defaultContext = 'info'\n  let currentContext = defaultContext\n\n  const dialogContainerTitle = $('<h4 class=\"modal-title\" id=\"' +\n    exports.utils.randomId('examinr-status-dialog-title-') + '\">')\n  const dialogContainerContent = $('<div class=\"modal-body\" id=\"' +\n    exports.utils.randomId('examinr-status-dialog-body-') + '\">')\n  const dialogContainerFooter = $(\n    '<div class=\"modal-footer\">' +\n      '<button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\">Close</button>' +\n    '</div>')\n  const dialogContainer = $(\n    '<div class=\"modal\" tabindex=\"-1\" role=\"alertdialog\" ' +\n        'aria-labelledby=\"' + dialogContainerTitle.attr('id') + '\"' +\n        'aria-describedby=\"' + dialogContainerContent.attr('id') + '\">' +\n      '<div class=\"modal-dialog modal-lg\" role=\"document\">' +\n        '<div class=\"modal-content\"><div class=\"modal-header\"></div></div>' +\n      '</div>' +\n    '</div>')\n\n  const statusMessageEl = $('<div class=\"alert alert-danger lead examinr-status-message\" role=\"alert\"></div>')\n\n  dialogContainer.find('.modal-header').append(dialogContainerTitle)\n  dialogContainer.find('.modal-content').append(dialogContainerContent).append(dialogContainerFooter)\n\n  /**\n   * Show a status message.\n   * @param {object} condition the condition object to show. Must contain the following elements:\n   *  type {string} one of \"error\", \"locked\", \"warning\", or \"info\"\n   *  message {string} the status message, may contain HTML\n   *  title {string} (for type \"error\" or \"locked\") the title for the error dialog\n   *  button {string} (for type \"error\") the button label for the error dialog\n   *  action {string} (for type \"error\") the action associated with the button. If \"reload\", the page is reloaded,\n   *    otherwise, the dialog is simply closed.\n   */\n  Shiny.addCustomMessageHandler('__.examinr.__-statusMessage', function (condition) {\n    statusMessageEl.detach()\n    if (condition.type === 'error') {\n      showErrorDialog(condition.content.title, condition.content.body, condition.action, condition.content.button,\n        condition.triggerId, condition.triggerEvent, condition.triggerDelay)\n    } else if (condition.type === 'locked') {\n      showErrorDialog(condition.content.title, condition.content.body, 'none', '')\n      $('main').hide()\n    } else {\n      const alertContext = condition.type === 'warning' ? 'alert-warning' : 'alert-info'\n      statusMessageEl.removeClass('alert-warning alert-info')\n        .addClass(alertContext)\n        .append(statusMessageEl)\n        .html(condition.content.body)\n        .find('.examinr-timestamp')\n        .each(parseTimestamp)\n    }\n    fixMainOffset()\n  })\n\n  /**\n   * Fix the top offset of the main content to make room for the status container.\n   */\n  function fixMainOffset () {\n    if (statusContainer && statusContainer.length > 0) {\n      $('body').css('paddingTop', statusContainer.outerHeight())\n    }\n  }\n\n  /**\n   * Parse the content inside the element as timestamp and replace with the browser's locale date-time string.\n   */\n  function parseTimestamp () {\n    const el = $(this)\n    const timestamp = parseInt(el.text())\n    if (timestamp && !isNaN(timestamp)) {\n      el.text(exports.utils.formatDate(timestamp * 1000))\n    } else {\n      el.text('')\n    }\n  }\n\n  /**\n   * Show a modal error dialog.\n   * @param {string} title title of the dialog, may contain HTML\n   * @param {string} content content of the dialog, may contain HTML\n   * @param {string} action what action should be taken when the button is clicked. If \"reload\", the browser is\n   *   instructed to reload the page. If \"none\", the dialog cannot be closed. In all other cases,\n   *   clicking the button will close the dialog.\n   * @param {string} button label for the button, may not contain HTML\n   */\n  function showErrorDialog (title, content, action, button, triggerId, triggerEvent, triggerDelay) {\n    const closeBtn = dialogContainerFooter.children('button')\n\n    dialogContainerTitle.html(title).find('.examinr-timestamp').each(parseTimestamp)\n    dialogContainerContent.html(content).find('.examinr-timestamp').each(parseTimestamp)\n\n    if (action === 'none') {\n      dialogContainerFooter.hide()\n    } else {\n      closeBtn.text(button)\n      if (action === 'reload') {\n        closeBtn.one('click', function () {\n          window.location.reload()\n        })\n      } else if (action === 'trigger' && triggerId && triggerEvent) {\n        closeBtn.one('click', function () {\n          if (triggerDelay) {\n            exports.utils.toggleShim($('body'), true)\n            window.setTimeout(() => $('#' + triggerId).trigger(triggerEvent), triggerDelay)\n          } else {\n            $('#' + triggerId).trigger(triggerEvent)\n          }\n        })\n      }\n    }\n\n    exports.utils.toggleShim($('body'), false)\n\n    dialogContainer.attr('role', (action === 'none') ? 'dialog' : 'errordialog')\n      .appendTo(document.body)\n      .one('hidden.bs.modal', function () {\n        dialogContainer.detach()\n      })\n      .modal({\n        keyboard: false,\n        backdrop: 'static',\n        show: true\n      })\n  }\n\n  $(function () {\n    exports.utils.toggleShim($('body'), true)\n    statusContainer = $('.examinr-exam-status')\n    messages = JSON.parse($('script.examinr-status-messages').remove().text() || '{}')\n    statusContainer.addClass('alert alert-' + currentContext)\n    fixMainOffset()\n  })\n\n  return {\n    /**\n     * Reset (i.e., hide) the status messages\n     */\n    resetMessages: function () {\n      statusMessageEl.detach()\n      dialogContainer.detach()\n      fixMainOffset()\n    },\n\n    /**\n     * Get the message associated with an identifier.\n     * @param {string} what the message identifier\n     * @returns the message for the given identifier, or null if the identifier is unknown.\n     */\n    getMessage: function (what) {\n      return messages[what] || null\n    },\n\n    /**\n     * Set the context of the status bar.\n     * @param {string} context the context class, one of info, warning, danger. If missing, reset to the default\n     *   context class.\n     */\n    setContext: function (context) {\n      if (!context) {\n        context = defaultContext\n      }\n      statusContainer.removeClass('alert-' + currentContext).addClass('alert-' + context)\n      currentContext = context\n    },\n\n    /**\n     * Append the element to the status bar and adjust the offset.\n     * @param {jQuery} el the element to append\n     * @param {string} where where to append the element. Can be one of \"left\", \"center\" or \"right\"\n     */\n    append: function (el, where) {\n      el = $(el)\n      switch (where) {\n        case 'left':\n          statusContainer.children('.col-left').append(el)\n          break\n        case 'right':\n          statusContainer.children('.col-right').append(el)\n          break\n        case 'center':\n        default:\n          statusContainer.children('.col-center').append(el)\n      }\n      fixMainOffset()\n      return el\n    },\n\n    /**\n     * Remove the element from the status bar and adjust the offset.\n     * @param {jQuery} el the element to remove\n     */\n    remove: function (el) {\n      el.remove()\n      fixMainOffset()\n    },\n\n    /**\n    * Fix the top offset of the main content to make room for the status bar.\n    */\n    fixMainOffset: fixMainOffset,\n\n    /**\n     * Show a modal error dialog.\n     * @param {string} title title of the dialog, may contain HTML\n     * @param {string} content content of the dialog, may contain HTML\n     * @param {string} action what action should be taken when the button is clicked. If \"reload\", the browser is\n     *   instructed to reload the page. If \"none\", the dialog cannot be closed. In all other cases,\n     *   clicking the button will close the dialog.\n     * @param {string} button label for the button, may not contain HTML\n     */\n    showErrorDialog: showErrorDialog\n  }\n}())\n","exports.attempt = (function () {\n  'use strict'\n\n  let config = {}\n  let timelimitTimer\n  let timelimit = Number.POSITIVE_INFINITY\n  let timerIsShown = false\n\n  const progressEl = $('<div class=\"examinr-progress\" role=\"status\"></div>')\n\n  /** Update the current attempt information.\n   *\n   * @param {object} attempt an object with the following properties:\n   *   - {boolean} active whether there is an active attempt.\n   *   - {integer} timelimit the timestamp (in seconds) when the current attempt is closed.\n   */\n  Shiny.addCustomMessageHandler('__.examinr.__-attemptStatus', function (attempt) {\n    if (attempt.gracePeriod) {\n      config.gracePeriod = attempt.gracePeriod\n    }\n    if (attempt && attempt.active) {\n      $('main').show().trigger('shown')\n      progressEl.show()\n\n      if (attempt.timelimit !== 0 && (!attempt.timelimit || attempt.timelimit === 'Inf')) {\n        attempt.timelimit = Number.POSITIVE_INFINITY\n      }\n      try {\n        timelimit = new Date(attempt.timelimit * 1000)\n        if (timelimitTimer) {\n          window.clearTimeout(timelimitTimer)\n          timelimitTimer = false\n        }\n        updateTimeLeft()\n      } catch (e) {\n        window.console.warn('Cannot set timelimit for current attempt:', e)\n        timelimit = Number.POSITIVE_INFINITY\n      }\n    } else {\n      $('main').hide()\n      exports.status.remove(progressEl)\n      exports.status.setContext()\n    }\n  })\n\n  function toBase10 (val) {\n    return (val >= 10 ? val.toString(10) : '0' + val.toString(10))\n  }\n\n  /**\n   * Update the \"time left\" status.\n   */\n  function updateTimeLeft () {\n    let msLeft = timelimit === Number.POSITIVE_INFINITY ? Number.POSITIVE_INFINITY : timelimit - new Date()\n    const timerEl = progressEl.find('.examinr-timer')\n\n    if (!isNaN(msLeft) && msLeft < Number.POSITIVE_INFINITY) {\n      if (msLeft < 1 && msLeft > -1000 * (config.gracePeriod || 1)) {\n        msLeft = 0\n      }\n      if (msLeft >= 0) {\n        const hrsLeft = Math.floor(msLeft / 3600000)\n        const minLeft = Math.floor((msLeft % 3600000) / 60000)\n        const secLeft = Math.floor((msLeft % 60000) / 1000)\n\n        if (hrsLeft > 0) {\n          timerEl.children('.hrs').removeClass('ignore').text(toBase10(hrsLeft))\n        } else {\n          timerEl.children('.hrs').addClass('ignore').text('00')\n        }\n        timerEl.children('.min').text(toBase10(minLeft))\n        if (hrsLeft > 0 || minLeft >= 10) {\n          timerEl.children('.min').addClass('nosec')\n          timerEl.children('.sec').hide()\n        } else {\n          timerEl.children('.min').removeClass('nosec')\n          timerEl.children('.sec').show().text(toBase10(secLeft))\n        }\n        timerEl.show()\n\n        if (!timerIsShown) {\n          exports.status.fixMainOffset()\n          timerIsShown = true\n        }\n\n        if (hrsLeft > 0 || minLeft >= 12) {\n          timelimitTimer = window.setTimeout(updateTimeLeft, 60000) // call every minute\n        } else {\n          if (minLeft < 5) {\n            exports.status.setContext('danger')\n          } else if (minLeft < 10) {\n            exports.status.setContext('warning')\n          }\n          timelimitTimer = window.setTimeout(updateTimeLeft, 1000) // call every second\n        }\n      } else {\n        // Time is up. Destroy the interface.\n        $('main').remove()\n        const timeoutMsg = exports.status.getMessage('attemptTimeout')\n        exports.status.showErrorDialog(timeoutMsg.title, timeoutMsg.body, 'none')\n      }\n    } else {\n      timerEl.hide()\n    }\n  }\n\n  $(function () {\n    config = JSON.parse($('script.examinr-attempts-config').remove().text() || '{}')\n    const progressMsg = exports.status.getMessage('progress')\n\n    if (progressMsg) {\n      // replace the following format strings:\n      // - \"{section_nr}\" with an element holding the current section number\n      // - \"{total_sections}\" with an element holding the total number of sections\n      // - \"{time_left}\" with an element holding the time left\n      const sectionProgress = progressMsg.section\n        .replace('{section_nr}', '<span class=\"examinr-section-nr\">1</span>')\n        .replace('{total_sections}', '<span class=\"examinr-total-sections\">' + (config.totalSections || 1) +\n                  '</span>')\n      const timerHtml = progressMsg.timer\n        .replace('{time_left}', '<span class=\"examinr-timer\" role=\"timer\">' +\n                                  '<span class=\"hrs\">??</span>' +\n                                  '<span class=\"min\">??</span>' +\n                                  '<span class=\"sec\"></span>' +\n                                '</span>')\n\n      if (config.progressive || config.haveTimelimit) {\n        if (config.progressive && config.haveTimelimit) {\n          progressEl.html(progressMsg.combined\n            .replace('{section}', sectionProgress)\n            .replace('{timer}', timerHtml))\n        } else if (config.progressive) {\n          progressEl.html(sectionProgress)\n        } else if (config.haveTimelimit) {\n          progressEl.html(timerHtml)\n        }\n\n        exports.status.append(progressEl)\n        updateTimeLeft()\n      }\n    }\n\n    if (config.progressbar) {\n      const progressbarEl = $(\n        '<div class=\"progress\">' +\n          '<div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"' +\n            config.totalSections + '\" style=\"min-width: 2em;\">' +\n          '</div>' +\n        '</div>')\n      exports.status.append(progressbarEl)\n    }\n  })\n\n  return {\n    /**\n     * Update the current section number.\n     * @param {int} currentSectionNr the current section number\n     */\n    updateSection: function (currentSectionNr) {\n      if (!currentSectionNr || isNaN(currentSectionNr) || currentSectionNr < 0 ||\n          currentSectionNr > config.totalSections) {\n        progressEl.hide()\n      } else {\n        progressEl.show().find('.examinr-section-nr').text(currentSectionNr)\n        if (config.progressbar) {\n          progressEl.find('.progress-bar')\n            .attr('aria-valuenow', currentSectionNr)\n            .width(Math.round(100 * currentSectionNr / config.totalSections) + '%')\n        }\n      }\n    }\n  }\n}())\n","exports.feedback = (function () {\n  'use strict'\n\n  const correctIcon = '<svg aria-label=\"correct\" class=\"examinr-feedback-annotation\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"/></svg>'\n\n  const incorrectIcon = '<svg aria-label=\"incorrect\" class=\"examinr-feedback-annotation\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z\"/></svg>'\n\n  const numFormat = window.Intl.NumberFormat(undefined, {\n    signDisplay: 'never',\n    style: 'decimal',\n    minimumSignificantDigits: 1,\n    maximumSignificantDigits: 3\n  })\n\n  const feedbackRenderer = []\n  const shinyRenderDelay = 250\n  let pointsEl\n\n  function runAfterUpdate (input, func) {\n    func()\n    input.one('shiny:updateinput', function () {\n      window.setTimeout(func, shinyRenderDelay)\n    })\n  }\n\n  function attemptChanged () {\n    const sel = $(this)\n    exports.utils.toggleShim($('body'), true)\n    // update the input value for the autocomplete input\n    Shiny.setInputValue('__.examinr.__-attemptSel', sel.val())\n  }\n\n  /**\n   * Render feedback data\n   */\n  Shiny.addCustomMessageHandler('__.examinr.__-feedback', function (data) {\n    exports.utils.toggleShim($('body'), false)\n    if (!pointsEl) {\n      $('.examinr-section-next').remove()\n      $('main').show()\n      exports.sections.showAll()\n\n      let options = ''\n      let disabled = 'disabled'\n\n      if (data.otherAttempts && data.otherAttempts.length > 0) {\n        options = data.otherAttempts.map(at => (\n          '<option value=\"' + at.id + '\">' + exports.utils.formatDate(at.finishedAt * 1000) + '</option>'\n        )).join('')\n\n        if (data.otherAttempts.length > 1) {\n          disabled = ''\n        }\n      }\n\n      const selId = exports.utils.randomId('attempt-sel')\n      exports.status.append('<div class=\"input-group input-group-sm\">' +\n            '<div class=\"input-group-prepend\">' +\n              '<label class=\"input-group-text\" for=\"' + selId + '\">' +\n                exports.status.getMessage('feedback').attemptLabel +\n              '</label>' +\n            '</div>' +\n            '<select class=\"custom-select\" ' + disabled + ' id=\"' + selId + '\">' +\n              options +\n            '</select>' +\n          '</div>', 'right')\n        .children('#' + selId)\n        .val(data.attempt.id)\n        .change(attemptChanged)\n\n      pointsEl = exports.status.append('<span></span>')\n    }\n\n    // turn feedback array into a map\n    const feedbackMap = Object.fromEntries(data.feedback.map(function (feedback) {\n      return [feedback.qid, feedback]\n    }))\n\n    let totalPoints = 0\n    let awardedPoints = 0\n\n    // Render feedback for text (or numeric) questions\n    $('.examinr-question').each(function () {\n      const question = $(this)\n      const label = question.data('questionlabel')\n      for (let i = 0, end = feedbackRenderer.length; i < end; i++) {\n        if (question.filter(feedbackRenderer[i].selector).length > 0) {\n          feedbackRenderer[i].callback(question, feedbackMap[label] || {})\n          if (label in feedbackMap) {\n            totalPoints += (feedbackMap[label].maxPoints || 0)\n            awardedPoints += (feedbackMap[label].points || NaN)\n            delete feedbackMap[label]\n          } else {\n            totalPoints += (question.data('maxpoints') || 0)\n            awardedPoints = NaN\n          }\n          return true\n        }\n      }\n      window.console.warn('No feedback renderer for question ' + label)\n    })\n\n    if (isNaN(awardedPoints)) {\n      awardedPoints = '&mdash;'\n    }\n\n    pointsEl.html(exports.status.getMessage('feedback').status\n      .replace('{awarded_points}', awardedPoints)\n      .replace('{total_points}', totalPoints))\n\n    exports.status.fixMainOffset()\n  })\n\n  function questionFooter (question) {\n    const card = question.hasClass('card') ? question : question.find('.card')\n    const footer = card.find('.card-footer')\n    if (footer.length === 0) {\n      return $('<div class=\"card-footer\">').appendTo(card)\n    }\n    return footer\n  }\n\n  function renderDefaultFeedback (question, feedback) {\n    const badge = question.find('.examinr-points')\n    if (badge.find('.awarded').length === 0) {\n      badge.prepend('<span class=\"awarded\"></span><span class=\"sr-only\"> out of </span>')\n    }\n\n    if (feedback.points || feedback.points === 0) {\n      const context = feedback.points <= 0 ? 'danger'\n        : (feedback.points >= feedback.maxPoints ? 'success' : 'secondary')\n\n      badge.removeClass('badge-secondary badge-info badge-success badge-danger')\n        .addClass('badge-' + context)\n        .find('.awarded')\n        .addClass('lead')\n        .text(feedback.points)\n    } else {\n      badge.removeClass('badge-secondary badge-info badge-success badge-danger')\n        .addClass('badge-info')\n        .find('.awarded')\n        .removeClass('lead')\n        .html('&mdash;')\n    }\n\n    // remove all previous feedback\n    question.find('.examinr-grading-feedback').remove()\n    const footer = questionFooter(question)\n\n    if (feedback.solution) {\n      footer.append('<div class=\"examinr-grading-feedback\">' +\n          '<h6>' + exports.status.getMessage('feedback').solutionLabel + '</h6>' +\n          '<div>' + feedback.solution + '</div>' +\n        '</div>')\n    }\n\n    if (feedback.comment) {\n      footer.append('<div class=\"text-muted examinr-grading-feedback\">' +\n        '<h6>' + exports.status.getMessage('feedback').commentLabel + '</h6>' +\n        '<div>' + feedback.comment + '</div>' +\n      '</div>')\n    }\n\n    exports.utils.renderMathJax(footer)\n  }\n\n  // Default feedback renderer for built-in questions created by `text_question()`\n  feedbackRenderer.push({\n    selector: '.examinr-q-textquestion',\n    callback: function (question, feedback) {\n      renderDefaultFeedback(question, feedback)\n\n      question.find('.shiny-input-container input,.shiny-input-container textarea')\n        .prop('readonly', true)\n        .val(feedback.answer || '')\n    }\n  })\n\n  // Default feedback renderer for built-in questions created by `mc_question()`\n  feedbackRenderer.push({\n    selector: '.examinr-q-mcquestion',\n    callback: function (question, feedback) {\n      const solution = feedback.solution\n      feedback.solution = null\n      renderDefaultFeedback(question, feedback)\n\n      runAfterUpdate(question, function () {\n        // reset old feedback\n        question.find('.examinr-feedback-annotation').remove()\n        question.find('label').removeAttr('class')\n\n        // display new feedback\n        const cbs = question.find('input[type=checkbox],input[type=radio]')\n        cbs.prop('disabled', true).prop('checked', false)\n\n        if (feedback.answer) {\n          feedback.answer.forEach(sel => {\n            if (sel.weight) {\n              const context = sel.weight > 0 ? 'success' : 'danger'\n              const weightStr = (sel.weight > 0 ? '+' : '&minus;') + numFormat.format(sel.weight)\n              cbs.filter('[value=\"' + sel.value + '\"]')\n                .prop('checked', true)\n                .parent()\n                .append('<span class=\"examinr-feedback-annotation badge badge-pill badge-' + context + '\">' +\n                  weightStr + '</span>')\n            }\n          })\n        }\n\n        if (solution) {\n          const correctValues = new Set(solution)\n\n          cbs.each(function () {\n            const cb = $(this)\n            const label = cb.parent()\n            if (cb.prop('checked')) {\n              if (correctValues.has(cb.val())) {\n                label.addClass('text-success').prepend(correctIcon)\n              } else {\n                label.addClass('text-danger').prepend(incorrectIcon)\n              }\n            } else {\n              if (correctValues.has(cb.val())) {\n                label.addClass('text-danger').prepend(incorrectIcon)\n              } else {\n                label.addClass('text-muted').prepend(correctIcon)\n              }\n            }\n          })\n        }\n      })\n    }\n  })\n\n  // Default feedback renderer for built-in exercise questions.\n  feedbackRenderer.push({\n    selector: '.examinr-q-exercise',\n    callback: function (question, feedback) {\n      const solution = feedback.solution\n      feedback.solution = null\n      renderDefaultFeedback(question, feedback)\n\n      const editor = question.data('editor')\n      if (editor) {\n        editor.setReadOnly(true)\n        editor.getSession().setValue(feedback.answer || '\\n')\n      }\n      question.find('.examinr-run-button').remove()\n      question.find('.examinr-exercise-status').remove()\n      const footer = questionFooter(question)\n\n      footer.removeClass('alert alert-danger text-muted')\n      if (solution) {\n        questionFooter(question)\n          .append('<div class=\"examinr-grading-feedback\">' +\n            '<h6>' + exports.status.getMessage('feedback').solutionLabel + '</h6>' +\n            '<pre><code>' + solution + '</code></pre>' +\n          '</div>')\n      }\n    }\n  })\n\n  return {\n    /**\n     * Register a function to render the feedback for all questions matching the given selector.\n     * If two functions match the same question, the function registered *later* will be called.\n     *\n     * @param {string} selector a valid jQuery selector query\n     * @param {function} func callback function which will be called with two arguments:\n     *   {jQuery} question the question element\n     *   {Object} the feedback object\n     */\n    registerFeedbackRenderer: function (selector, func) {\n      feedbackRenderer.unshift({ selector: selector, callback: func })\n    }\n  }\n}())\n","/*\n * Some parts of this file are dervied from the learnr project, which is licensed under the Apache 2.0 license.\n * Original work Copyright 2019 RStudio\n * Derived work Copyright 2020 David Kepplinger\n */\nexports.exercises = (function () {\n  'use strict'\n\n  const kMinLines = 5\n  const kMaxDefaultLines = 20\n  const kThemeMonochrome = 'ace/theme/monochrome'\n  const kThemeDefault = 'ace/theme/textmate'\n\n  let currentTheme = kThemeMonochrome\n  let exerciseRunButtonEnabled = true\n\n  function attachAceEditor (id, code) {\n    const editor = ace.edit(id)\n    editor.setHighlightActiveLine(false)\n    editor.setShowPrintMargin(false)\n    editor.setShowFoldWidgets(false)\n    editor.setBehavioursEnabled(true)\n    editor.renderer.setDisplayIndentGuides(false)\n    editor.setTheme(currentTheme)\n    editor.$blockScrolling = Infinity\n    editor.session.setMode('ace/mode/r')\n    editor.session.getSelection().clearSelection()\n    editor.setValue(code, -1)\n    return editor\n  }\n\n  function exerciseRunning (outputContainer, running) {\n    if (typeof running === 'undefined') {\n      running = !exerciseRunButtonEnabled\n    }\n\n    exports.utils.toggleShim(outputContainer, running)\n    exerciseRunButtonEnabled = (running === false)\n    $('.examinr-run-button').prop('disabled', !exerciseRunButtonEnabled)\n  }\n\n  function initializeExerciseEditor () {\n    const exercise = $(this)\n    const exerciseOptions = JSON.parse(exercise.children('script[type=\"application/json\"]').detach().text() || '{}')\n    let code = ''\n    exercise.children('pre').each(function () {\n      code += $(this).children('code').text() + '\\n'\n    }).remove()\n\n    const codeLines = code.split(/\\r?\\n/).length\n\n    const lines = (exerciseOptions.lines ? Math.max(1, exerciseOptions.lines)\n      : Math.min(Math.max(kMinLines, codeLines), kMaxDefaultLines))\n\n    if (codeLines < lines) {\n      code += '\\n'.repeat(lines - codeLines)\n    }\n\n    const editorId = exerciseOptions.inputId + '-editor'\n    const pointsLabel = exerciseOptions.points\n      ? '<span class=\"examinr-points badge badge-secondary\">' + exerciseOptions.points + '</span>'\n      : ''\n\n    const messageStrings = exports.status.getMessage('exercise') || {}\n\n    const exercisePanel = $('<div class=\"card\">' +\n      '<h6 class=\"card-header\">' + (exerciseOptions.title || '') + pointsLabel + '</h6>' +\n      '<div class=\"card-body\">' +\n        '<div id=\"' + editorId + '\" class=\"examinr-exercise-editor\" role=\"textbox\" contenteditable=\"true\" ' +\n            'aria-multiline=\"true\" tabindex=0 ></div>' +\n      '</div>' +\n      '<div class=\"card-footer text-muted\">' +\n        '<button type=\"button\" class=\"btn btn-secondary btn-sm examinr-run-button float-right\">' +\n          '<span class=\"icon\"><svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" class=\"bi bi-play-fill\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\"><path d=\"M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z\"/></svg></span>' +\n          exerciseOptions.buttonLabel +\n        '</button>' +\n        '<div class=\"examinr-exercise-status\">' + messageStrings.notYetRun + '</div>' +\n      '</div>' +\n    '</div>')\n\n    const outputContainer = $('<div class=\"examinr-exercise-output card bg-light\">' +\n      (messageStrings.outputTitle\n        ? ('<div class=\"card-header text-muted small\">' + messageStrings.outputTitle + '</div>')\n        : '') +\n      '<div class=\"card-body p-3\" role=\"status\"></div>' +\n    '</div>')\n    const exerciseEditor = exercise.find('#' + editorId)\n\n    exercise.append(exercisePanel).append(outputContainer)\n\n    // make exercise more accessible\n    exports.accessibility.ariaLabelledBy(exercise, exercisePanel.find('.card-header'))\n    exports.accessibility.ariaAssociate('controls', exercisePanel.find('.examinr-run-button'), outputContainer.find('.card-body'))\n    exerciseEditor.attr('aria-label', exerciseOptions.inputLabel)\n    exerciseEditor.children().attr('aria-hidden', 'true')\n\n    if (!messageStrings.notYetRun) {\n      exercise.find('.examinr-exercise-status').hide()\n    } else {\n      exports.accessibility.ariaDescribedBy(exercisePanel, exercise.find('.examinr-exercise-status'))\n    }\n    exercise.find('.examinr-exercise-output').hide()\n\n    const runCodeButton = exercise.find('.examinr-run-button')\n\n    // Proxy a \"run code\" event through the button to also trigger shiny input events.\n    const triggerClick = function () {\n      runCodeButton.click()\n    }\n\n    const editor = attachAceEditor(editorId, code)\n    editor.setFontSize(0.8125 * parseFloat(exercise.find('.card-body').css('font-size')))\n    editor.commands.addCommand({\n      name: 'run_rcode',\n      bindKey: { win: 'Ctrl+Enter', mac: 'Command+Enter' },\n      exec: triggerClick\n    })\n    editor.commands.addCommand({\n      name: 'run_rcode-shift',\n      bindKey: { win: 'Ctrl+Shift+Enter', mac: 'Command+Shift+Enter' },\n      exec: triggerClick\n    })\n\n    const updateAceHeight = function () {\n      editor.setOptions({\n        minLines: lines,\n        maxLines: lines\n      })\n    }\n    updateAceHeight()\n    editor.getSession().on('change', updateAceHeight)\n\n    runCodeButton.click(function () {\n      editor.focus()\n    })\n\n    exercise.data({\n      editor: editor,\n      options: exerciseOptions\n    })\n\n    exercise.parents('section').on('shown', function () {\n      editor.resize(true)\n    })\n  }\n\n  function initializeEditorBindings () {\n    const inputBindings = new Shiny.InputBinding()\n    $.extend(inputBindings, {\n      find: function (scope) {\n        return $(scope).find('.examinr-exercise')\n      },\n      getId: function (exercise) {\n        return $(exercise).data('options').inputId\n      },\n      subscribe: function (exercise, callback) {\n        exercise = $(exercise)\n        exercise.find('.examinr-run-button').on('click.examinrExerciseInputBinding', function () {\n          if (exerciseRunButtonEnabled) {\n            exercise.data('sendData', true)\n            exerciseRunning(exercise.find('.examinr-exercise-output'), true)\n            callback(true)\n          }\n        })\n      },\n      unsubscribe: function (exercise) {\n        $(exercise).find('.examinr-run-button').off('.examinrExerciseInputBinding')\n      },\n      getValue: function (exercise) {\n        exercise = $(exercise)\n        if (exercise.data('sendData') !== true) {\n          return null\n        }\n        exercise.data('sendData', false)\n        return {\n          label: exercise.data('options').label,\n          code: exercise.data('editor').getSession().getValue(),\n          timestamp: new Date().getTime()\n        }\n      },\n      setValue: function (exercise, value) {\n        $(exercise).data('editor').getSession().setValue(value)\n      }\n    })\n    Shiny.inputBindings.register(inputBindings, 'examinr.exerciseInputBinding')\n\n    const outputBindings = new Shiny.OutputBinding()\n    $.extend(outputBindings, {\n      find: function (scope) {\n        return $(scope).find('.examinr-exercise')\n      },\n      getId: function (exercise) {\n        return $(exercise).data('options').outputId\n      },\n      renderValue: function (exercise, data) {\n        exercise = $(exercise)\n        if (data.result) {\n          const outputContainer = exercise.find('.examinr-exercise-output').show().find('.card-body')\n          outputContainer.html(data.result)\n          outputContainer.find('.kable-table table').addClass('table table-striped table-sm')\n        } else {\n          exercise.find('.examinr-exercise-output').hide()\n        }\n        if (data.status) {\n          const footerClass = (data.status_class && data.status_class !== 'info')\n            ? ('alert-' + data.status_class) : 'text-muted'\n\n          exercise.find('.card-footer')\n            .removeClass('text-muted')\n            .removeClass('alert-success')\n            .removeClass('alert-warning')\n            .removeClass('alert-danger')\n            .addClass(footerClass)\n          exercise.find('.examinr-exercise-status').show().html(data.status)\n        } else {\n          exercise.find('.examinr-exercise-status').hide().html('')\n        }\n        exerciseRunning(exercise.find('.examinr-exercise-output'), false)\n      },\n      renderError: function (exercise, error) {\n        exercise = $(exercise)\n        exerciseRunning(exercise.find('.examinr-exercise-output'), false)\n        exercise.find('.examinr-exercise-output').hide()\n        exercise.find('.examinr-exercise-status').show().text(error.message)\n      },\n      clearError: function (exercise) {\n        exercise = $(exercise)\n        exerciseRunning(exercise.find('.examinr-exercise-output'), false)\n        exercise.find('.examinr-exercise-output').hide()\n        exercise.find('.examinr-exercise-status').hide()\n      }\n    })\n    Shiny.outputBindings.register(outputBindings, 'examinr.exerciseOutputBinding')\n  }\n\n  $(function () {\n    $('.examinr-exercise').each(initializeExerciseEditor)\n    initializeEditorBindings()\n  })\n\n  return {\n    highContrastTheme: function (enabled) {\n      currentTheme = enabled ? kThemeMonochrome : kThemeDefault\n      $('.examinr-exercise').each(function () {\n        const editor = $(this).data('editor')\n        if (editor) {\n          editor.setTheme(currentTheme)\n        }\n      })\n    }\n  }\n}())\n","/*\n * Some parts of this file are dervied from the learnr project, which is licensed under the Apache 2.0 license.\n * Original work Copyright 2019 RStudio\n * Derived work Copyright 2020 David Kepplinger\n */\n(function () {\n  'use strict'\n\n  const kModifierKeyNone = 0\n  const kModifierKeyCtrl = 1\n  const kModifierKeyAlt = 2\n  const kModifierKeyShift = 4\n  const kModifierKeyMeta = 8\n  const kKeycodeTab = 9\n  const kKeycodeSpace = 32\n  var autocompleteTimerId\n  var aceAutocompleteCallback = function () {}\n\n  function modifierCombination (event) {\n    return kModifierKeyNone |\n        (event.ctrlKey ? kModifierKeyCtrl : 0) |\n        (event.altKey ? kModifierKeyAlt : 0) |\n        (event.metaKey ? kModifierKeyMeta : 0) |\n        (event.shiftKey ? kModifierKeyShift : 0)\n  }\n\n  const customRCompleter = {\n    insertMatch: function (editor, data) {\n      // remove prefix\n      const ranges = editor.selection.getAllRanges()\n      const filterLength = editor.completer.completions.filterText.length\n      for (var i = 0; i < ranges.length; i++) {\n        ranges[i].start.column -= filterLength\n        editor.session.remove(ranges[i])\n      }\n\n      // insert completion term (add parentheses for functions)\n      editor.execCommand('insertstring', data.caption)\n\n      // move cursor backwards for functions\n      if (data.is_function) {\n        editor.navigateLeft(1)\n      }\n    }\n  }\n\n  // this message handler is called when new autocomplete results are available.\n  Shiny.addCustomMessageHandler('__.examinr.__-autocomplete', function (suggestions) {\n    const completions = suggestions.map(function (item) {\n      // Items are an array of the form [namespace (str), symbol (str), isFunction (bool)]\n      if (!item || !item[1]) {\n        return null\n      }\n      return {\n        caption: item[1] + (item[2] ? '()' : ''),\n        value: item[1],\n        score: 0,\n        meta: item[0] ? ('{' + item[0] + '}') : '',\n        is_function: item[2],\n        completer: customRCompleter\n      }\n    }).filter(x => x)\n    aceAutocompleteCallback(null, completions)\n  })\n\n  function isPopupOpen (editor) {\n    return editor.completer && editor.completer.popup && editor.completer.popup.isOpen\n  }\n\n  function getCompletions (editor, session, position, _, callback) {\n    // send autocompletion request with all the code up to cursor position\n    // (done to enable multi-line autocompletions)\n    const code = session.getTextRange({\n      start: { row: 0, column: 0 },\n      end: position\n    })\n\n    // If the popup is not open, force a Shiny input event, otherwise only if the code changed.\n    const priority = isPopupOpen(editor) ? 'value' : 'event'\n\n    // this will be called when the Shiny message is received\n    aceAutocompleteCallback = callback\n    // update the input value for the autocomplete input\n    Shiny.setInputValue('__.examinr.__-autocomplete', {\n      code: code,\n      label: editor.exerciseLabel\n    }, { priority: priority })\n  }\n\n  // Initialize autocomplete for the exercise.\n  // Return false if the exercise does not need autocomplete, true otherwise.\n  function initializeExerciseAutocomplete () {\n    const exercise = $(this)\n    if (exercise.data('options').autocomplete !== true) {\n      return\n    }\n\n    // Initialize the editor for autocomplete\n\n    const editor = exercise.data('editor')\n    const exerciseOptions = exercise.data('options')\n\n    const startAutocomplete = function () {\n      editor.execCommand('startAutocomplete')\n    }\n\n    const onChangeCallback = function (data) {\n      // use only a single autocompleter at a time!\n      clearTimeout(autocompleteTimerId)\n\n      data = data || {}\n      if (data.action !== 'insert' || !data.lines || !data.lines.length || data.lines.length > 1) {\n        return\n      }\n      // NOTE: Ace has already updated the document line at this point\n      // so we can just look at the state of that line\n      const pos = editor.getCursorPosition()\n      const line = editor.session.getLine(pos.row)\n\n      // NOTE: we allow new autocompletion sessions following a\n      // ':' insertion just to enable cases where the user is\n      // typing e.g. 'stats::rnorm()' while the popup is visible\n      if (isPopupOpen(editor) && !/::$/.test(line)) {\n        return\n      }\n\n      // figure out appropriate delay -- want to autocomplete\n      // immediately after a '$' or '@' insertion, but need to\n      // execute on timeout to allow Ace to finish processing\n      // events (if any)\n      const delayMs = /[$@]$|::$/.test(line) ? 10 : 300\n      autocompleteTimerId = setTimeout(startAutocomplete, delayMs)\n    }\n\n    editor.on('change', onChangeCallback)\n    editor.on('destroy', function () {\n      editor.off(onChangeCallback)\n    })\n\n    editor.exerciseLabel = exerciseOptions.label\n\n    editor.completers = editor.completers || []\n    editor.completers.push({ getCompletions: getCompletions })\n    editor.setOptions({\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: false\n    })\n    editor.keyBinding.addKeyboardHandler({ handleKeyboard: autocompleteKeyboardHandler })\n  }\n\n  function autocompleteKeyboardHandler (data, hash, keyString, keyCode, event) {\n    if (hash !== -1 && data.editor) {\n      const modifierCombo = modifierCombination(event)\n      if ((keyCode === kKeycodeSpace && modifierCombo === kModifierKeyCtrl) ||\n          (keyCode === kKeycodeTab && modifierCombo === kModifierKeyNone &&\n            (!data.editor.completer || !data.editor.completer.activated))) {\n        // cancel any pending autocomplete\n        clearTimeout(autocompleteTimerId)\n        if (isPopupOpen(data.editor)) {\n          data.editor.completer.popup.hide()\n          return { command: 'null' }\n        } else {\n          return { command: 'startAutocomplete' }\n        }\n      }\n    }\n  }\n\n  $(function () {\n    $('.examinr-exercise').each(initializeExerciseAutocomplete)\n  })\n}())\n","exports.sections = (function () {\n  'use strict'\n\n  const recalculatedDelay = 250\n  let currentSectionEl\n  let currentSection = {}\n  let actualSections\n\n  function finishedRecalculating () {\n    exports.utils.toggleShim($('body'), false)\n  }\n\n  Shiny.addCustomMessageHandler('__.examinr.__-sectionChange', function (section) {\n    if (section) {\n      if (section.feedback === true) {\n        // Redirect to the feedback\n        window.location.search = '?display=feedback'\n      }\n\n      if (currentSectionEl && currentSectionEl.length > 0) {\n        currentSectionEl.removeAttr('role').hide()\n      } else if (section.id) {\n        $('section.level1').hide()\n      }\n      currentSection = section\n      currentSectionEl = $('#' + currentSection.id).parent()\n        .show()\n        .attr('role', 'main')\n        .trigger('shown')\n\n      const outputElements = currentSectionEl.find('.shiny-bound-output')\n      let recalculating = outputElements.length\n      if (recalculating > 0) {\n        // Assume that all outputs need to be recalculated.\n        // If not, call finishedRecalculating() after a set delay.\n        let recalculatingTimerId = window.setTimeout(finishedRecalculating, recalculatedDelay)\n        outputElements.one('shiny:recalculated', function () {\n          --recalculating\n          if (recalculating <= 0) {\n            // All outputs have been recalculated.\n            finishedRecalculating()\n          } else {\n            // Some outputs are still to be recalculated. Wait for them a short while, otherwise call\n            // finishedRecalculating()\n            window.clearTimeout(recalculatingTimerId)\n            recalculatingTimerId = window.setTimeout(finishedRecalculating, recalculatedDelay)\n          }\n        })\n      } else {\n        finishedRecalculating()\n      }\n\n      exports.status.resetMessages()\n      if (section.order) {\n        exports.attempt.updateSection(section.order)\n      }\n    }\n  })\n\n  $(function () {\n    const sectionsConfig = JSON.parse($('script.examinr-sections-config').remove().text() || '{}')\n\n    actualSections = $('section.level1')\n    // Add the correct label to each section\n    actualSections.each(function () {\n      const el = $(this)\n      exports.accessibility.ariaLabelledBy(el, el.children('h1'))\n    })\n\n    $('.examinr-section-next').click(function () {\n      exports.utils.toggleShim($('body'), true)\n    })\n\n    if (!sectionsConfig.progressive) {\n      // All-at-once exam. Show the \"next button\" only for the last real section.\n      $('.examinr-section-next').hide()\n      exports.accessibility.ariaLabelledBy($('main'), $('h1.title'))\n\n      // hide the last section (used for final remarks)\n      if (sectionsConfig.hideLastSection) {\n        actualSections.last().hide()\n        actualSections = actualSections.slice(0, -1)\n        actualSections.last().find('.examinr-section-next').show()\n      }\n    } else {\n      // progressive exams: hide all sections\n      actualSections.hide()\n      if (sectionsConfig.hideLastSection) {\n        $('section.level1:last .examinr-section-next').remove()\n        actualSections = actualSections.slice(0, -1)\n      }\n    }\n  })\n\n  return {\n    showAll: function () {\n      actualSections.show().trigger('shown')\n    }\n  }\n}())\n","exports.grading = (function () {\n  'use strict'\n\n  function updateGrading (question, gradingData) {\n    // Save locally\n    question.data('gradingData', gradingData)\n\n    // And remotely\n    if (!gradingData.feedbackShown) {\n      gradingData.feedback = null\n    }\n    Shiny.setInputValue('__.examinr.__-gradingData', gradingData)\n  }\n\n  function toggleFeedback () {\n    const btn = $(this)\n    const question = btn.parents('.examinr-question')\n    const gradingData = question.data('grading') || {}\n    if (gradingData.feedbackShown) {\n      btn.children('.btn-label').text('+')\n      btn.children('.sr-only').text('Add comment')\n      question.data('feedbackShown', false)\n        .find('.examinr-grading-feedback')\n        .remove()\n    } else {\n      btn.children('.btn-label').html('&times;')\n      btn.children('.sr-only').text('Remove comment')\n      let footer = question.find('.card-footer')\n      if (footer.length === 0) {\n        footer = $('<div class=\"card-footer\">')\n        footer.appendTo(question.hasClass('card') ? question : question.find('.card'))\n      }\n      question.data('feedbackShown', true)\n\n      const commentInputId = exports.utils.randomId('comment-')\n\n      footer.append(\n        '<div class=\"input-group examinr-grading-feedback\">' +\n          '<div class=\"input-group-prepend\">' +\n            '<label class=\"input-group-text\" for=\"' + commentInputId + '\">' +\n              exports.status.getMessage('feedback').commentLabel +\n            '</label>' +\n          '</div>' +\n          '<textarea class=\"form-control\" id=\"' + commentInputId + '\">' +\n            (gradingData.feedback || '') +\n          '</textarea>' +\n        '</div>')\n\n      question.find('.examinr-grading-feedback textarea').on('change', function () {\n        const gradingData = question.data('grading') || {}\n        gradingData.feedback = $(this).val()\n        updateGrading(question, gradingData)\n      })\n    }\n    gradingData.feedbackShown = !gradingData.feedbackShown\n    updateGrading(question, gradingData)\n  }\n\n  function prepareQuestion () {\n    const question = $(this)\n    const gradingData = question.data('grading') || {}\n    const pointsEl = question.find('.examinr-points')\n    const container = pointsEl.parent()\n    const placeholder = pointsEl.remove().text()\n\n    if (!gradingData.maxPoints) {\n      gradingData.maxPoints = parseFloat(question.data('maxPoints')) || 1\n    }\n\n    const pointsInput = $('<input type=\"number\" class=\"form-control\" />')\n      .attr('max', gradingData.maxPoints)\n      .attr('id', exports.utils.randomId())\n\n    const feedbackBtn = gradingData.feedbackShown ? '&times;' : '+'\n    const feedbackLabel = gradingData.feedbackShown ? 'Remove feedback' : 'Add feedback'\n\n    container.addClass('clearfix')\n      .append('<div class=\"input-group input-group-sm examinr-grading-points\">' +\n        '<label class=\"sr-only\" for=\"' + pointsInput.attr('id') + '\">Points</label>' +\n        '<div class=\"input-group-append\">' +\n          '<span class=\"input-group-text\">/ ' + placeholder + '</span>' +\n          '<button type=\"button\" class=\"btn btn-secondary\">' +\n            '<span class=\"btn-label\" aria-hidden=\"true\">' + feedbackBtn + '</span>' +\n            '<span class=\"sr-only\">' + feedbackLabel + '</span>' +\n          '</button>' +\n        '</div>' +\n      '</div>')\n      .find('.input-group')\n      .prepend(pointsInput)\n\n    question.data('grading', gradingData)\n    container.find('.btn').click(toggleFeedback)\n    exports.utils.disableNumberInputDefaults(pointsInput)\n  }\n\n  function startGrading () {\n    exports.status.disableProgress()\n    const statusContainer = exports.status.statusContainer()\n\n    const studentNameInputId = exports.utils.randomId('student-name')\n    const attemptInputId = exports.utils.randomId('attempt')\n\n    statusContainer.append(\n      '<form class=\"form-inline examinr-grading-attempt\">' +\n        '<div class=\"input-group input-group-sm\">' +\n          '<div class=\"input-group-prepend\">' +\n            '<button class=\"btn btn-secondary\" type=\"button\">' +\n              '<span aria-hidden=\"true\">&lt;</span>' +\n              '<span class=\"sr-only\">Previous student</span>' +\n            '</button>' +\n          '</div>' +\n          '<label class=\"sr-only\" for=\"' + studentNameInputId + '\">Student</label>' +\n          '<input type=\"text\" id=\"' + studentNameInputId + '\" class=\"form-control\" placeholder=\"Student\" />' +\n          '<span class=\"input-group-append\">' +\n            '<button class=\"btn btn-secondary\" type=\"button\">' +\n              '<span aria-hidden=\"true\">&gt;</span>' +\n              '<span class=\"sr-only\">Next Student</span>' +\n            '</button>' +\n          '</span>' +\n        '</div>' +\n        '<div class=\"input-group input-group-sm\">' +\n          '<label class=\"sr-only\" for=\"' + attemptInputId + '\">Attempt</label>' +\n          '<select id=\"' + attemptInputId + '\" class=\"form-control\" disabled></select>' +\n        '</div>' +\n      '</form>'\n    )\n\n    exports.status.fixMainOffset()\n\n    // Prepare the questions\n    $('.examinr-question').each(prepareQuestion)\n  }\n\n  return {\n    startGrading: startGrading\n  }\n}())\n","ace.define('ace/theme/monochrome', ['require', 'exports', 'module', 'ace/lib/dom'], function (acequire, exports, module) {\n  exports.isDark = false\n  exports.cssClass = 'ace-monochrome'\n  exports.cssText = '.ace-monochrome .ace_gutter{background:#000;color:#fff}.ace-monochrome.ace_print-margin{width:2px;background:#999}.ace-monochrome .ace_editor{background-color:#fff;color:#000}.ace-monochrome .ace_cursor{color:#000;border:0;border-right:0;border-left:.5em solid #000}.ace-monochrome .ace_marker-layer .ace_selection{background:#777}.ace-monochrome.ace_multiselect .ace_selection.ace_start{border-radius:2px}.ace-monochrome .ace_marker-layer .ace_step{background:#000}.ace-monochrome .ace_marker-layer .ace_bracket{margin:0;border:2px solid #d55e00}.ace-monochrome .ace_marker-layer .ace_active-line{background:transparent;border:2px solid #d55e00}.ace-monochrome .ace_gutter-active-line{background:#000}.ace-monochrome .ace_marker-layer .ace_selected-word{border:2px dashed #d55e00}.ace-monochrome .ace_invisible{color:#fff}.ace-monochrome .ace_comment,.ace-monochrome .ace_constant.ace_language{font-style:italic;color:#444}.ace-monochrome .ace_indent-guide{background:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC\") right repeat-y}.ace_layer{z-index:3}.ace_layer.ace_print-margin-layer{z-index:2}.ace_layer.ace_marker-layer{z-index:1}.ace_editor.ace_autocomplete{background:#ccc;border:solid 2px #000 !important;color:#000}.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line,.ace_editor.ace_autocomplete .ace_marker-layer .ace_line-hover{background:#fff;border:0;border:2px dashed #d55e00}'\n  var dom = acequire('../lib/dom')\n  dom.importCssString(exports.cssText, exports.cssClass)\n})\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.5.3): util.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Private TransitionEnd Helpers\n * ------------------------------------------------------------------------\n */\n\nconst TRANSITION_END = 'transitionend'\nconst MAX_UID = 1000000\nconst MILLISECONDS_MULTIPLIER = 1000\n\n// Shoutout AngusCroll (https://goo.gl/pxwQGp)\nfunction toType(obj) {\n  if (obj === null || typeof obj === 'undefined') {\n    return `${obj}`\n  }\n\n  return {}.toString.call(obj).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\nfunction getSpecialTransitionEndEvent() {\n  return {\n    bindType: TRANSITION_END,\n    delegateType: TRANSITION_END,\n    handle(event) {\n      if ($(event.target).is(this)) {\n        return event.handleObj.handler.apply(this, arguments) // eslint-disable-line prefer-rest-params\n      }\n\n      return undefined\n    }\n  }\n}\n\nfunction transitionEndEmulator(duration) {\n  let called = false\n\n  $(this).one(Util.TRANSITION_END, () => {\n    called = true\n  })\n\n  setTimeout(() => {\n    if (!called) {\n      Util.triggerTransitionEnd(this)\n    }\n  }, duration)\n\n  return this\n}\n\nfunction setTransitionEndSupport() {\n  $.fn.emulateTransitionEnd = transitionEndEmulator\n  $.event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent()\n}\n\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\n\nconst Util = {\n  TRANSITION_END: 'bsTransitionEnd',\n\n  getUID(prefix) {\n    do {\n      prefix += ~~(Math.random() * MAX_UID) // \"~~\" acts like a faster Math.floor() here\n    } while (document.getElementById(prefix))\n\n    return prefix\n  },\n\n  getSelectorFromElement(element) {\n    let selector = element.getAttribute('data-target')\n\n    if (!selector || selector === '#') {\n      const hrefAttr = element.getAttribute('href')\n      selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : ''\n    }\n\n    try {\n      return document.querySelector(selector) ? selector : null\n    } catch (_) {\n      return null\n    }\n  },\n\n  getTransitionDurationFromElement(element) {\n    if (!element) {\n      return 0\n    }\n\n    // Get transition-duration of the element\n    let transitionDuration = $(element).css('transition-duration')\n    let transitionDelay = $(element).css('transition-delay')\n\n    const floatTransitionDuration = parseFloat(transitionDuration)\n    const floatTransitionDelay = parseFloat(transitionDelay)\n\n    // Return 0 if element or transition duration is not found\n    if (!floatTransitionDuration && !floatTransitionDelay) {\n      return 0\n    }\n\n    // If multiple durations are defined, take the first\n    transitionDuration = transitionDuration.split(',')[0]\n    transitionDelay = transitionDelay.split(',')[0]\n\n    return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n  },\n\n  reflow(element) {\n    return element.offsetHeight\n  },\n\n  triggerTransitionEnd(element) {\n    $(element).trigger(TRANSITION_END)\n  },\n\n  supportsTransitionEnd() {\n    return Boolean(TRANSITION_END)\n  },\n\n  isElement(obj) {\n    return (obj[0] || obj).nodeType\n  },\n\n  typeCheckConfig(componentName, config, configTypes) {\n    for (const property in configTypes) {\n      if (Object.prototype.hasOwnProperty.call(configTypes, property)) {\n        const expectedTypes = configTypes[property]\n        const value = config[property]\n        const valueType = value && Util.isElement(value) ?\n          'element' : toType(value)\n\n        if (!new RegExp(expectedTypes).test(valueType)) {\n          throw new Error(\n            `${componentName.toUpperCase()}: ` +\n            `Option \"${property}\" provided type \"${valueType}\" ` +\n            `but expected type \"${expectedTypes}\".`)\n        }\n      }\n    }\n  },\n\n  findShadowRoot(element) {\n    if (!document.documentElement.attachShadow) {\n      return null\n    }\n\n    // Can find the shadow root otherwise it'll return the document\n    if (typeof element.getRootNode === 'function') {\n      const root = element.getRootNode()\n      return root instanceof ShadowRoot ? root : null\n    }\n\n    if (element instanceof ShadowRoot) {\n      return element\n    }\n\n    // when we don't find a shadow root\n    if (!element.parentNode) {\n      return null\n    }\n\n    return Util.findShadowRoot(element.parentNode)\n  },\n\n  jQueryDetection() {\n    if (typeof $ === 'undefined') {\n      throw new TypeError('Bootstrap\\'s JavaScript requires jQuery. jQuery must be included before Bootstrap\\'s JavaScript.')\n    }\n\n    const version = $.fn.jquery.split(' ')[0].split('.')\n    const minMajor = 1\n    const ltMajor = 2\n    const minMinor = 9\n    const minPatch = 1\n    const maxMajor = 4\n\n    if (version[0] < ltMajor && version[1] < minMinor || version[0] === minMajor && version[1] === minMinor && version[2] < minPatch || version[0] >= maxMajor) {\n      throw new Error('Bootstrap\\'s JavaScript requires at least jQuery v1.9.1 but less than v4.0.0')\n    }\n  }\n}\n\nUtil.jQueryDetection()\nsetTransitionEndSupport()\n\nexport default Util\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.5.3): modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'modal'\nconst VERSION = '4.5.3'\nconst DATA_KEY = 'bs.modal'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\nconst ESCAPE_KEYCODE = 27 // KeyboardEvent.which value for Escape (Esc) key\n\nconst Default = {\n  backdrop: true,\n  keyboard: true,\n  focus: true,\n  show: true\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  keyboard: 'boolean',\n  focus: 'boolean',\n  show: 'boolean'\n}\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_FOCUSIN = `focusin${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEUP_DISMISS = `mouseup.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SCROLLABLE = 'modal-dialog-scrollable'\nconst CLASS_NAME_SCROLLBAR_MEASURER = 'modal-scrollbar-measure'\nconst CLASS_NAME_BACKDROP = 'modal-backdrop'\nconst CLASS_NAME_OPEN = 'modal-open'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_STATIC = 'modal-static'\n\nconst SELECTOR_DIALOG = '.modal-dialog'\nconst SELECTOR_MODAL_BODY = '.modal-body'\nconst SELECTOR_DATA_TOGGLE = '[data-toggle=\"modal\"]'\nconst SELECTOR_DATA_DISMISS = '[data-dismiss=\"modal\"]'\nconst SELECTOR_FIXED_CONTENT = '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top'\nconst SELECTOR_STICKY_CONTENT = '.sticky-top'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Modal {\n  constructor(element, config) {\n    this._config = this._getConfig(config)\n    this._element = element\n    this._dialog = element.querySelector(SELECTOR_DIALOG)\n    this._backdrop = null\n    this._isShown = false\n    this._isBodyOverflowing = false\n    this._ignoreBackdropClick = false\n    this._isTransitioning = false\n    this._scrollbarWidth = 0\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  // Public\n\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return\n    }\n\n    if ($(this._element).hasClass(CLASS_NAME_FADE)) {\n      this._isTransitioning = true\n    }\n\n    const showEvent = $.Event(EVENT_SHOW, {\n      relatedTarget\n    })\n\n    $(this._element).trigger(showEvent)\n\n    if (this._isShown || showEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._isShown = true\n\n    this._checkScrollbar()\n    this._setScrollbar()\n\n    this._adjustDialog()\n\n    this._setEscapeEvent()\n    this._setResizeEvent()\n\n    $(this._element).on(\n      EVENT_CLICK_DISMISS,\n      SELECTOR_DATA_DISMISS,\n      event => this.hide(event)\n    )\n\n    $(this._dialog).on(EVENT_MOUSEDOWN_DISMISS, () => {\n      $(this._element).one(EVENT_MOUSEUP_DISMISS, event => {\n        if ($(event.target).is(this._element)) {\n          this._ignoreBackdropClick = true\n        }\n      })\n    })\n\n    this._showBackdrop(() => this._showElement(relatedTarget))\n  }\n\n  hide(event) {\n    if (event) {\n      event.preventDefault()\n    }\n\n    if (!this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const hideEvent = $.Event(EVENT_HIDE)\n\n    $(this._element).trigger(hideEvent)\n\n    if (!this._isShown || hideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._isShown = false\n    const transition = $(this._element).hasClass(CLASS_NAME_FADE)\n\n    if (transition) {\n      this._isTransitioning = true\n    }\n\n    this._setEscapeEvent()\n    this._setResizeEvent()\n\n    $(document).off(EVENT_FOCUSIN)\n\n    $(this._element).removeClass(CLASS_NAME_SHOW)\n\n    $(this._element).off(EVENT_CLICK_DISMISS)\n    $(this._dialog).off(EVENT_MOUSEDOWN_DISMISS)\n\n    if (transition) {\n      const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n      $(this._element)\n        .one(Util.TRANSITION_END, event => this._hideModal(event))\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      this._hideModal()\n    }\n  }\n\n  dispose() {\n    [window, this._element, this._dialog]\n      .forEach(htmlElement => $(htmlElement).off(EVENT_KEY))\n\n    /**\n     * `document` has 2 events `EVENT_FOCUSIN` and `EVENT_CLICK_DATA_API`\n     * Do not move `document` in `htmlElements` array\n     * It will remove `EVENT_CLICK_DATA_API` event that should remain\n     */\n    $(document).off(EVENT_FOCUSIN)\n\n    $.removeData(this._element, DATA_KEY)\n\n    this._config = null\n    this._element = null\n    this._dialog = null\n    this._backdrop = null\n    this._isShown = null\n    this._isBodyOverflowing = null\n    this._ignoreBackdropClick = null\n    this._isTransitioning = null\n    this._scrollbarWidth = null\n  }\n\n  handleUpdate() {\n    this._adjustDialog()\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...config\n    }\n    Util.typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _triggerBackdropTransition() {\n    if (this._config.backdrop === 'static') {\n      const hideEventPrevented = $.Event(EVENT_HIDE_PREVENTED)\n\n      $(this._element).trigger(hideEventPrevented)\n      if (hideEventPrevented.isDefaultPrevented()) {\n        return\n      }\n\n      const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n\n      if (!isModalOverflowing) {\n        this._element.style.overflowY = 'hidden'\n      }\n\n      this._element.classList.add(CLASS_NAME_STATIC)\n\n      const modalTransitionDuration = Util.getTransitionDurationFromElement(this._dialog)\n      $(this._element).off(Util.TRANSITION_END)\n\n      $(this._element).one(Util.TRANSITION_END, () => {\n        this._element.classList.remove(CLASS_NAME_STATIC)\n        if (!isModalOverflowing) {\n          $(this._element).one(Util.TRANSITION_END, () => {\n            this._element.style.overflowY = ''\n          })\n            .emulateTransitionEnd(this._element, modalTransitionDuration)\n        }\n      })\n        .emulateTransitionEnd(modalTransitionDuration)\n      this._element.focus()\n    } else {\n      this.hide()\n    }\n  }\n\n  _showElement(relatedTarget) {\n    const transition = $(this._element).hasClass(CLASS_NAME_FADE)\n    const modalBody = this._dialog ? this._dialog.querySelector(SELECTOR_MODAL_BODY) : null\n\n    if (!this._element.parentNode ||\n        this._element.parentNode.nodeType !== Node.ELEMENT_NODE) {\n      // Don't move modal's DOM position\n      document.body.appendChild(this._element)\n    }\n\n    this._element.style.display = 'block'\n    this._element.removeAttribute('aria-hidden')\n    this._element.setAttribute('aria-modal', true)\n    this._element.setAttribute('role', 'dialog')\n\n    if ($(this._dialog).hasClass(CLASS_NAME_SCROLLABLE) && modalBody) {\n      modalBody.scrollTop = 0\n    } else {\n      this._element.scrollTop = 0\n    }\n\n    if (transition) {\n      Util.reflow(this._element)\n    }\n\n    $(this._element).addClass(CLASS_NAME_SHOW)\n\n    if (this._config.focus) {\n      this._enforceFocus()\n    }\n\n    const shownEvent = $.Event(EVENT_SHOWN, {\n      relatedTarget\n    })\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._element.focus()\n      }\n\n      this._isTransitioning = false\n      $(this._element).trigger(shownEvent)\n    }\n\n    if (transition) {\n      const transitionDuration = Util.getTransitionDurationFromElement(this._dialog)\n\n      $(this._dialog)\n        .one(Util.TRANSITION_END, transitionComplete)\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      transitionComplete()\n    }\n  }\n\n  _enforceFocus() {\n    $(document)\n      .off(EVENT_FOCUSIN) // Guard against infinite focus loop\n      .on(EVENT_FOCUSIN, event => {\n        if (document !== event.target &&\n            this._element !== event.target &&\n            $(this._element).has(event.target).length === 0) {\n          this._element.focus()\n        }\n      })\n  }\n\n  _setEscapeEvent() {\n    if (this._isShown) {\n      $(this._element).on(EVENT_KEYDOWN_DISMISS, event => {\n        if (this._config.keyboard && event.which === ESCAPE_KEYCODE) {\n          event.preventDefault()\n          this.hide()\n        } else if (!this._config.keyboard && event.which === ESCAPE_KEYCODE) {\n          this._triggerBackdropTransition()\n        }\n      })\n    } else if (!this._isShown) {\n      $(this._element).off(EVENT_KEYDOWN_DISMISS)\n    }\n  }\n\n  _setResizeEvent() {\n    if (this._isShown) {\n      $(window).on(EVENT_RESIZE, event => this.handleUpdate(event))\n    } else {\n      $(window).off(EVENT_RESIZE)\n    }\n  }\n\n  _hideModal() {\n    this._element.style.display = 'none'\n    this._element.setAttribute('aria-hidden', true)\n    this._element.removeAttribute('aria-modal')\n    this._element.removeAttribute('role')\n    this._isTransitioning = false\n    this._showBackdrop(() => {\n      $(document.body).removeClass(CLASS_NAME_OPEN)\n      this._resetAdjustments()\n      this._resetScrollbar()\n      $(this._element).trigger(EVENT_HIDDEN)\n    })\n  }\n\n  _removeBackdrop() {\n    if (this._backdrop) {\n      $(this._backdrop).remove()\n      this._backdrop = null\n    }\n  }\n\n  _showBackdrop(callback) {\n    const animate = $(this._element).hasClass(CLASS_NAME_FADE) ?\n      CLASS_NAME_FADE : ''\n\n    if (this._isShown && this._config.backdrop) {\n      this._backdrop = document.createElement('div')\n      this._backdrop.className = CLASS_NAME_BACKDROP\n\n      if (animate) {\n        this._backdrop.classList.add(animate)\n      }\n\n      $(this._backdrop).appendTo(document.body)\n\n      $(this._element).on(EVENT_CLICK_DISMISS, event => {\n        if (this._ignoreBackdropClick) {\n          this._ignoreBackdropClick = false\n          return\n        }\n\n        if (event.target !== event.currentTarget) {\n          return\n        }\n\n        this._triggerBackdropTransition()\n      })\n\n      if (animate) {\n        Util.reflow(this._backdrop)\n      }\n\n      $(this._backdrop).addClass(CLASS_NAME_SHOW)\n\n      if (!callback) {\n        return\n      }\n\n      if (!animate) {\n        callback()\n        return\n      }\n\n      const backdropTransitionDuration = Util.getTransitionDurationFromElement(this._backdrop)\n\n      $(this._backdrop)\n        .one(Util.TRANSITION_END, callback)\n        .emulateTransitionEnd(backdropTransitionDuration)\n    } else if (!this._isShown && this._backdrop) {\n      $(this._backdrop).removeClass(CLASS_NAME_SHOW)\n\n      const callbackRemove = () => {\n        this._removeBackdrop()\n        if (callback) {\n          callback()\n        }\n      }\n\n      if ($(this._element).hasClass(CLASS_NAME_FADE)) {\n        const backdropTransitionDuration = Util.getTransitionDurationFromElement(this._backdrop)\n\n        $(this._backdrop)\n          .one(Util.TRANSITION_END, callbackRemove)\n          .emulateTransitionEnd(backdropTransitionDuration)\n      } else {\n        callbackRemove()\n      }\n    } else if (callback) {\n      callback()\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  // the following methods are used to handle overflowing modals\n  // todo (fat): these should probably be refactored out of modal.js\n  // ----------------------------------------------------------------------\n\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n\n    if (!this._isBodyOverflowing && isModalOverflowing) {\n      this._element.style.paddingLeft = `${this._scrollbarWidth}px`\n    }\n\n    if (this._isBodyOverflowing && !isModalOverflowing) {\n      this._element.style.paddingRight = `${this._scrollbarWidth}px`\n    }\n  }\n\n  _resetAdjustments() {\n    this._element.style.paddingLeft = ''\n    this._element.style.paddingRight = ''\n  }\n\n  _checkScrollbar() {\n    const rect = document.body.getBoundingClientRect()\n    this._isBodyOverflowing = Math.round(rect.left + rect.right) < window.innerWidth\n    this._scrollbarWidth = this._getScrollbarWidth()\n  }\n\n  _setScrollbar() {\n    if (this._isBodyOverflowing) {\n      // Note: DOMNode.style.paddingRight returns the actual value or '' if not set\n      //   while $(DOMNode).css('padding-right') returns the calculated value or 0 if not set\n      const fixedContent = [].slice.call(document.querySelectorAll(SELECTOR_FIXED_CONTENT))\n      const stickyContent = [].slice.call(document.querySelectorAll(SELECTOR_STICKY_CONTENT))\n\n      // Adjust fixed content padding\n      $(fixedContent).each((index, element) => {\n        const actualPadding = element.style.paddingRight\n        const calculatedPadding = $(element).css('padding-right')\n        $(element)\n          .data('padding-right', actualPadding)\n          .css('padding-right', `${parseFloat(calculatedPadding) + this._scrollbarWidth}px`)\n      })\n\n      // Adjust sticky content margin\n      $(stickyContent).each((index, element) => {\n        const actualMargin = element.style.marginRight\n        const calculatedMargin = $(element).css('margin-right')\n        $(element)\n          .data('margin-right', actualMargin)\n          .css('margin-right', `${parseFloat(calculatedMargin) - this._scrollbarWidth}px`)\n      })\n\n      // Adjust body padding\n      const actualPadding = document.body.style.paddingRight\n      const calculatedPadding = $(document.body).css('padding-right')\n      $(document.body)\n        .data('padding-right', actualPadding)\n        .css('padding-right', `${parseFloat(calculatedPadding) + this._scrollbarWidth}px`)\n    }\n\n    $(document.body).addClass(CLASS_NAME_OPEN)\n  }\n\n  _resetScrollbar() {\n    // Restore fixed content padding\n    const fixedContent = [].slice.call(document.querySelectorAll(SELECTOR_FIXED_CONTENT))\n    $(fixedContent).each((index, element) => {\n      const padding = $(element).data('padding-right')\n      $(element).removeData('padding-right')\n      element.style.paddingRight = padding ? padding : ''\n    })\n\n    // Restore sticky content\n    const elements = [].slice.call(document.querySelectorAll(`${SELECTOR_STICKY_CONTENT}`))\n    $(elements).each((index, element) => {\n      const margin = $(element).data('margin-right')\n      if (typeof margin !== 'undefined') {\n        $(element).css('margin-right', margin).removeData('margin-right')\n      }\n    })\n\n    // Restore body padding\n    const padding = $(document.body).data('padding-right')\n    $(document.body).removeData('padding-right')\n    document.body.style.paddingRight = padding ? padding : ''\n  }\n\n  _getScrollbarWidth() { // thx d.walsh\n    const scrollDiv = document.createElement('div')\n    scrollDiv.className = CLASS_NAME_SCROLLBAR_MEASURER\n    document.body.appendChild(scrollDiv)\n    const scrollbarWidth = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth\n    document.body.removeChild(scrollDiv)\n    return scrollbarWidth\n  }\n\n  // Static\n\n  static _jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      const _config = {\n        ...Default,\n        ...$(this).data(),\n        ...(typeof config === 'object' && config ? config : {})\n      }\n\n      if (!data) {\n        data = new Modal(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config](relatedTarget)\n      } else if (_config.show) {\n        data.show(relatedTarget)\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document).on(EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  let target\n  const selector = Util.getSelectorFromElement(this)\n\n  if (selector) {\n    target = document.querySelector(selector)\n  }\n\n  const config = $(target).data(DATA_KEY) ?\n    'toggle' : {\n      ...$(target).data(),\n      ...$(this).data()\n    }\n\n  if (this.tagName === 'A' || this.tagName === 'AREA') {\n    event.preventDefault()\n  }\n\n  const $target = $(target).one(EVENT_SHOW, showEvent => {\n    if (showEvent.isDefaultPrevented()) {\n      // Only register focus restorer if modal will actually get shown\n      return\n    }\n\n    $target.one(EVENT_HIDDEN, () => {\n      if ($(this).is(':visible')) {\n        this.focus()\n      }\n    })\n  })\n\n  Modal._jQueryInterface.call($(target), config, this)\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Modal._jQueryInterface\n$.fn[NAME].Constructor = Modal\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Modal._jQueryInterface\n}\n\nexport default Modal\n"]}