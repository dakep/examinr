<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Storage Providers — storage_provider • examinr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Storage Providers — storage_provider" />
<meta property="og:description" content="Exam data is stored via a storage provider, which is a list of functions.
Each user action will trigger a storage event for which one of the functions provided by the storage provider
is called.
See dbi_storage_provider() for an implementation based on a DBI backend." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">examinr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/examinr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Content</li>
    <li>
      <a href="../articles/randomized_exam.html">Randomization</a>
    </li>
    <li>
      <a href="../articles/question_types.html">Question types</a>
    </li>
    <li>
      <a href="../articles/exercises.html">Coding exercises</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../articles/grading.html">Grading</a>
    </li>
    <li>
      <a href="../articles/deployment.html">Deploying (general)</a>
    </li>
    <li>
      <a href="../articles/deployment_shinyapps.html">Deploying (to shinyapps.io)</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Configuration</li>
    <li>
      <a href="../articles/navigation.html">Section navigation</a>
    </li>
    <li>
      <a href="../articles/config_access.html">Controlling access to exams</a>
    </li>
    <li>
      <a href="../articles/config_storage.html">Storage configuration</a>
    </li>
    <li>
      <a href="../articles/localization.html">Localization</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dakep/examinr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Storage Providers</h1>
    <small class="dont-index">Source: <a href='https://github.com/dakep/examinr/blob/master/R/storage_provider.R'><code>R/storage_provider.R</code></a></small>
    <div class="hidden name"><code>storage_provider.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Exam data is stored via a <em>storage provider</em>, which is a list of functions.
Each user action will trigger a storage event for which one of the functions provided by the storage provider
is called.
See <code><a href='dbi_storage_provider.html'>dbi_storage_provider()</a></code> for an implementation based on a DBI backend.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Storage providers must implement all of the functions listed under <em>Storage functions</em>.</p>
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>

    

<p>The arguments to the storage functions are:</p>
<dl>
<dt><code>user</code></dt><dd><p>the user object (as returned from the configured <a href='authentication_provider.html'>authentication provider</a>).
May be <code>NULL</code> for <code>get_section_data()</code>, in which case data for <em>all</em> users is requested.</p></dd>
<dt><code>exam_id</code></dt><dd><p>the exam id as given in the Rmd file.</p></dd>
<dt><code>exam_version</code></dt><dd><p>the exam version string as given in the Rmd file.</p></dd>
<dt><code>seed</code></dt><dd><p>an integer representing the random seed associated with the attempt.</p></dd>
<dt><code>started_at</code></dt><dd><p>the timestamp when the attempt was started (as <a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXct</a> object
in the system's timezone).</p></dd>
<dt><code>finished_at</code></dt><dd><p>the timestamp when the attempt was finished (as <a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXct</a> object
in the system's timezone).</p></dd>
<dt><code>attempt_id</code></dt><dd><p>the attempt identifier as returned by <code>start_attempt()</code> or <code>get_attempts()</code>.</p></dd>
<dt><code>section</code></dt><dd><p>the section identifier string. May be <code>NULL</code> for <code>get_section_data()</code>, in which case data for
<em>all</em> sections is requested.</p></dd>
<dt><code>section_data</code></dt><dd><p>an R list object with arbitrary elements. The storage function should not
make any assumptions on the make-up of this list.</p></dd>
<dt><code>points</code></dt><dd><p>an R list object with arbitrary elements. The storage function should not make any assumptions
on the make-up of this list.</p></dd>
<dt><code>...</code></dt><dd><p>additional arguments for future extensions.</p></dd>

</dl>

    <h2 class="hasAnchor" id="storage-functions"><a class="anchor" href="#storage-functions"></a>Storage functions</h2>

    

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a><code>create_attempt(user, exam_id, exam_version, seed, started_at, ...)</code></h3>


<p>Create a new attempt with the given seed and start time.
The function should return a unique identifier for the attempt.
In case of an error, the function should return <code>FALSE</code>.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a><code>finish_attempt(attempt_id, finished_at, ...)</code></h3>


<p>Mark the attempt as finished.
The function should return <code>TRUE</code> if the data is saved successfully and <code>FALSE</code> in case of an error.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a><code>grade_attempt(attempt_id, points, ...)</code></h3>


<p>Grade the given attempt, i.e., assign the given points to the attempt.
The function should return <code>TRUE</code> if the points are saved successfully and <code>FALSE</code> in case of an error.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a><code>get_attempts(user, exam_id, exam_version, ...)</code></h3>


<p>Return a list of all previous attempts for the given filter.
The argument <code>user</code> can be <code>NULL</code>, in which case the function should return the attempts for <em>all</em> users.
The function must return a list of attempts. Each list object must contain the following:</p>
<dl>
<dt><code>id</code></dt><dd><p>the identifier associated with this attempt.</p></dd>
<dt><code>user</code></dt><dd><p>the user object associated with this attempt.</p></dd>
<dt><code>started_at</code></dt><dd><p>the time (as <a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXct</a> object in the system's timezone) the attempt
was started.</p></dd>
<dt><code>finished_at</code></dt><dd><p>the time (as <a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXct</a> object in the system's timezone) the attempt
was finished, or <code>NULL</code> if it has not been finished.</p></dd>
<dt><code>points</code></dt><dd><p>the R list object as given to <code>grade_attempt()</code>, or <code>NULL</code> if the attempt is not yet graded.</p></dd>

</dl>

<p>In case there are no attempts associated with this user and exam, or in the case of an error,
the function should return an empty list.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a><code>save_section_data(attempt_id, section, section_data, ...)</code></h3>


<p>Save the given section data.
The function should return <code>TRUE</code> if the data is saved successfully and <code>FALSE</code> in case of an error.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a><code>get_section_data(attempt_id, section, ...)</code></h3>


<p>Query the most recent section data for the given attempt.
If <code>section</code> is <code>NULL</code>, the function should not filter data for this criterion.
In this case the function should return only the most recent section data available for the given attempt.
The function must return a list of section data objects matching the given filter. Each object must contain the
following:</p>
<dl>
<dt><code>section</code></dt><dd><p>the section identifier string as given in the call to <code>save_section_data()</code>.</p></dd>
<dt><code>timestamp</code></dt><dd><p>the time (as <a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXct</a> object in the system's timezone) the section data
was saved.</p></dd>
<dt><code>section_data</code></dt><dd><p>the section data object as given in the call to <code>save_section_data()</code>.</p></dd>

</dl>

<p>In case of an error, or if there is no data available for the given filter, the function should return an empty
list.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a><code>get_last_section(attempt_id, ...)</code></h3>


<p>Get the identifier of the section for which the most recent data is available.
The function should return a character with the section identifier of the section for which data was saved
most recently.
In case of an error, or if there is no data available for the given filter, the function should return <code>NULL</code>.</p>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other storage configuration: 
<code><a href='dbi_storage_provider.html'>dbi_storage_provider</a>()</code></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Kepplinger.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


