<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Controlling access to exams • examinr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Controlling access to exams">
<meta property="og:description" content="examinr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">examinr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/examinr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Content</li>
    <li>
      <a href="../articles/randomized_exam.html">Randomization</a>
    </li>
    <li>
      <a href="../articles/question_types.html">Question types</a>
    </li>
    <li>
      <a href="../articles/exercises.html">Coding exercises</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/grading.html">Grading</a>
    </li>
    <li>
      <a href="../articles/deployment_shinyapps.html">Deploying to shinyapps.io</a>
    </li>
    <li>
      <a href="../articles/deployment.html">Deploying (general)</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Configuration</li>
    <li>
      <a href="../articles/navigation.html">Section navigation</a>
    </li>
    <li>
      <a href="../articles/config_access.html">Controlling access to exams</a>
    </li>
    <li>
      <a href="../articles/config_storage.html">Storage configuration</a>
    </li>
    <li>
      <a href="../articles/localization.html">Localization</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dakep/examinr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Controlling access to exams</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dakep/examinr/blob/master/vignettes/config_access.Rmd"><code>vignettes/config_access.Rmd</code></a></small>
      <div class="hidden name"><code>config_access.Rmd</code></div>

    </div>

    
    
<p>Access to an exam is determined on two factors: <em>who</em> is accessing the exam and <em>when</em> is the exam accessed. The first factor, <em>who</em> is accessing the exam, is resolved through the <em>authentication provider</em>. Once the user is authenticated, either a new attempt is started or an unfinished attempt is resumed. Whether the user is allowed to start a new attempt or resume an old attempt is determined by the global or user-specific attempt configuration.</p>
<div id="authentication-providers" class="section level2">
<h2 class="hasAnchor">
<a href="#authentication-providers" class="anchor"></a>Authentication providers</h2>
<p>Currently, examinr ships with only three authentication providers: <code><a href="../reference/rsconnect_auth.html">rsconnect_auth()</a></code>, which uses the RStudio Connect user information, as well as <code><a href="../reference/password_auth.html">password_auth()</a></code> and <code><a href="../reference/password_auth.html">ui_token_auth()</a></code> which show a login screen when the learner loads the exam.</p>
<div id="login-screen" class="section level3">
<h3 class="hasAnchor">
<a href="#login-screen" class="anchor"></a>Login screen</h3>
<p>The <code><a href="../reference/password_auth.html">password_auth()</a></code> and <code><a href="../reference/password_auth.html">ui_token_auth()</a></code> authentication providers work on every shiny server. Learners visiting the exam URL are prompted either for</p>
<ul>
<li>a username and password (<code><a href="../reference/password_auth.html">password_auth()</a></code>), or</li>
<li>a login token (<code><a href="../reference/password_auth.html">ui_token_auth()</a></code>),</li>
</ul>
<p>which have to be somehow distributed to the learners beforehand.</p>
<div class="figure">
<img src="figures/exam_config/login.png" alt="Login screen from ui_token_auth() at the beginning of the exam."><p class="caption">Login screen from <code><a href="../reference/password_auth.html">ui_token_auth()</a></code> at the beginning of the exam.</p>
</div>
</div>
<div id="rstudio-connect" class="section level3">
<h3 class="hasAnchor">
<a href="#rstudio-connect" class="anchor"></a>RStudio Connect</h3>
<p>RStudio Connect exposes the current user in <code>session$user</code> and the group membership of the user in <code>session$groups</code>. The <code><a href="../reference/rsconnect_auth.html">rsconnect_auth()</a></code> authentication provider uses this information and allows you to give grading permission to certain groups. For example</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#! context="server-start"</span>
<span class="fu"><a href="../reference/exam_config.html">exam_config</a></span><span class="op">(</span>auth_provider <span class="op">=</span> <span class="fu"><a href="../reference/rsconnect_auth.html">rsconnect_auth</a></span><span class="op">(</span>grading_groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'instructor'</span>, <span class="st">'ta'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>would use the RStudio Connect user name as <code>user_id</code> and set <code>grading=TRUE</code> to any user with membership in either the <em>instructor</em> or <em>ta</em> group.</p>
<p>You can also write your own authentication provider which takes information from the session object (e.g., from the query string) to authenticate users. The authentication provider can add more information to the user object than specified above. Any function receiving the user object as input will receive all the information returned by the authentication provider.</p>
</div>
<div id="writing-a-custom-authentication-provider" class="section level3">
<h3 class="hasAnchor">
<a href="#writing-a-custom-authentication-provider" class="anchor"></a>Writing a custom authentication provider</h3>
<p>Loosely speaking, the authentication provider determines who the user is and relays this information in a standardized form to examinr. The authentication provider is set via <code><a href="../reference/exam_config.html">exam_config(auth_provider=)</a></code>, which requires a function taking the Shiny session as argument and returning a <em>user object</em>. The <em>user object</em> is an R list with the following entries</p>
<table class="table">
<thead><tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>user_id</code></td>
<td align="left">a character string uniquely identifying the user</td>
</tr>
<tr class="even">
<td align="left"><code>grading</code></td>
<td align="left">(optional) a logical value indicating if the user has permission to grade attempts</td>
</tr>
<tr class="odd">
<td align="left"><code>display_name</code></td>
<td align="left">(optional) a character string with a human-readable name to be displayed while grading</td>
</tr>
</tbody>
</table>
<p>The <code>user$user_id</code> must be present and uniquely identifies a user for the exam. If <code>user$grading</code> is present and is <code>TRUE</code>, the user has the ability to access the grading interface. Also, if <code>user$display_name</code> is present it will be shown in lieu of the user id when grading, but be aware of privacy issues when storing the exam data in an unencrypted database. See also the information for <a href="config_storage.html">storage providers</a>.</p>
</div>
</div>
<div id="attempt-configuration" class="section level2">
<h2 class="hasAnchor">
<a href="#attempt-configuration" class="anchor"></a>Attempt configuration</h2>
<p>The attempt configuration consists of the following options</p>
<table class="table">
<thead><tr class="header">
<th align="left">Option</th>
<th align="left">Description</th>
<th align="left">Default value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>opens</code></td>
<td align="left">date-time when the exam “opens”, i.e., becomes available to users</td>
<td align="left"><code>NA</code></td>
</tr>
<tr class="even">
<td align="left"><code>closes</code></td>
<td align="left">date-time when the exam “closes”, i.e., becomes unavailable to users</td>
<td align="left"><code>NA</code></td>
</tr>
<tr class="odd">
<td align="left"><code>max_attempts</code></td>
<td align="left">number of attempts a user is afforded</td>
<td align="left"><code>Inf</code></td>
</tr>
<tr class="even">
<td align="left"><code>timelimit</code></td>
<td align="left">time a user can take for a single attempt</td>
<td align="left"><code>Inf</code></td>
</tr>
<tr class="odd">
<td align="left"><code>grace_period</code></td>
<td align="left">seconds a user has to submit an unfinished attempt after the time limit has passed or the exam closed</td>
<td align="left"><code>NA</code></td>
</tr>
</tbody>
</table>
<p>The default attempt configuration (i.e., the configuration applying to all users unless overridden) is set in the YAML front matter of the exam document via options passed on to the output format <code><a href="../reference/exam_document.html">exam_document()</a></code>, e.g.:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="fu">output:</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="fu">examinr:</span><span class="at">:exam_document:</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">    <span class="fu">opens:</span><span class="at"> 2020-11-28 12:30 America/Vancouver</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">    <span class="fu">closes:</span><span class="at"> 2020-11-29 23:59 America/Vancouver</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    <span class="fu">max_attempts:</span><span class="at"> 2</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">    <span class="fu">timelimit:</span><span class="at"> 1:15</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    <span class="fu">grace_period:</span><span class="at"> 60</span></a></code></pre></div>
<p>The opens/closes date-time must be given in the format <em>YYYY-MM-DD HH:MM Timezone</em>. The above example configuration would make the exam available between 12:30 on Nov 28 and 23:59 on Nov 29, 2020 (the time is taken as the local time in Vancouver, Canada). Each user can take at most 2 attempts.</p>
<p>An attempt must be finished either within 1 hour and 15 minutes of starting the attempt, or at the closing time (whichever comes first). If the time runs out, the user is given 60 seconds to submit their exam. After this grace period the exam is disabled and all input up to this point is recorded automatically.</p>
<p>The attempt configuration can be overridden for specific users (e.g., to give them more time or more attempts). This is done by calling <code><a href="../reference/configure_attempts.html">configure_attempts()</a></code> in an R code chunk with <code>context="server-start"</code>. For instance, to give users <em>s443</em> and <em>s872</em> 2 hours for the exam, and give user <em>s221</em> more attempts, you would use</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#! context="server-start"</span>
<span class="fu"><a href="../reference/configure_attempts.html">configure_attempts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"s443"</span>, <span class="st">"s872"</span><span class="op">)</span>, timelimit <span class="op">=</span> <span class="st">"2:00"</span><span class="op">)</span>
<span class="fu"><a href="../reference/configure_attempts.html">configure_attempts</a></span><span class="op">(</span><span class="st">"s221"</span>, max_attempts <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p>This allows fully customization for user’s specific needs and requests. The last call to <code><a href="../reference/configure_attempts.html">configure_attempts()</a></code> for a certain user and specific option will be the one taking effect. The following example would give users <em>s443</em>, <em>s872</em>, and <em>s221</em> 2 hours to complete the exam, but users <em>s443</em> and <em>s872</em> would get 3 attempts, while user <em>s221</em> gets 4.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#! context="server-start"</span>
<span class="fu"><a href="../reference/configure_attempts.html">configure_attempts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"s443"</span>, <span class="st">"s872"</span>, <span class="st">"s221"</span><span class="op">)</span>, timelimit <span class="op">=</span> <span class="st">"2:00"</span>, max_attempts <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="../reference/configure_attempts.html">configure_attempts</a></span><span class="op">(</span><span class="st">"s221"</span>, max_attempts <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></code></pre></div>
<p>To disable opening or closing date-times (i.e., making the exam accessible as soon as it is uploaded or for the rest of time), set the option to <code>NA</code>. Similarly, disabling time limits and attempt counters, set the options to <code>Inf</code>.</p>
<p>Correct attempt configurations are critical for ensuring integrity of an exam. For debugging, you can verify the attempt configuration in your exam by printing the final configuration in the exam document with <code><a href="../reference/configure_attempts.html">show_attempts_configuration()</a></code>. Simply add an R code chunk to your exam which calls this function, e.g.,</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb5-1" data-line-number="1">```{r, exercise.static=TRUE}</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">show_attempts_configuration()</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">```</a></code></pre></div>
<p>For the example here this would give</p>
<div class="figure">
<img src="figures/exam_config/attempt_config.png" alt="Attempt configuration with all overrides" style="width:75.0%"><p class="caption">Attempt configuration with all overrides</p>
</div>
<p>A blank cell indicates that the global configuration (first line with user id <code>--</code>) is in effect for the respective option and user.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by David Kepplinger.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
